import { Component, Input, Output, EventEmitter, ViewChild, ElementRef, ContentChild } from '@angular/core';
import * as moment from 'moment';
import { FormControl } from '@angular/forms';
import { debounceTime, distinctUntilChanged } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "ngx-moment";
export class NgxTableSchedulerComponent {
    constructor() {
        this.resources = [];
        this.resourceFields = [];
        this.items = [];
        this.showSearchFilter = false;
        this.itemAssigned = new EventEmitter();
        this.itemDeleted = new EventEmitter();
        this.itemLeft = 0;
        this.tableRows = [];
        this.itemHeaders = [];
        this.filteredResources = [];
        this.searchCtrl = new FormControl();
        this.selectedItem = null;
    }
    set filter(filter) {
        this.searchCtrl.setValue(filter);
        if (this.tableRows) {
            this.filterResources(filter);
            this.generateTable();
        }
    }
    ngOnDestroy() {
    }
    ngOnInit() {
        this.handleFormSearch();
        this.filteredResources = this.resources;
        this.generateTable();
    }
    ngOnChanges(changes) {
        let shouldGenerate = false;
        if (changes['startOfCalendar'] && !(this.startOfCalendar instanceof moment)) {
            this.startOfCalendar = moment(this.startOfCalendar);
        }
        if (changes['endOfCalendar'] && !(this.endOfCalendar instanceof moment)) {
            this.endOfCalendar = moment(this.endOfCalendar);
        }
        if (changes['items']) {
            shouldGenerate = true;
        }
        if (changes['resources']) {
            this.filteredResources = this.resources;
            shouldGenerate = true;
        }
        if (shouldGenerate)
            this.generateTable();
    }
    prepareAssignItem(item) {
        this.items = this.items.filter(i => !i.temporary);
        this.noAvailableSlots = false;
        if (this.selectedItem?.id === item.id) {
            this.selectedItem = null;
            this.generateTable();
            return;
        }
        this.selectedItem = item;
        for (const resource of this.resources) {
            const resourceItems = this.items.filter(x => x.resource_id === resource.id);
            let qualifies = true;
            for (const resourceItem of resourceItems) {
                if (moment(resourceItem.start_date).isBefore(item.end_date) && moment(resourceItem.end_date).isAfter(item.start_date))
                    qualifies = false;
            }
            if (!qualifies)
                continue;
            this.items.push({
                ...item,
                resource_id: resource.id,
                temporary: true,
                color: 'rgb(162 155 178 / 62%)',
            });
        }
        const temporaryItem = this.items.filter(x => x.temporary);
        if (temporaryItem.length === 0) {
            this.noAvailableSlots = true;
        }
        this.generateTable();
        if (this.searchCtrl.value) {
            this.filterResources(this.searchCtrl.value);
        }
        // Scroll to event
        const differenceInPixel = moment(item.start_date).diff(this.startOfCalendar, 'days') * this.itemWidth;
        setTimeout(() => {
            this.table.nativeElement.scrollLeft = differenceInPixel;
        }, 50);
    }
    itemClick(item) {
        if (!item.temporary)
            return;
        this.items = this.items.filter(i => !i.temporary);
        this.items.find(i => i.id === item?.id).resource_id = item?.resource_id;
        console.log('i', item);
        this.generateTable();
        this.itemAssigned.emit(item);
    }
    generateTable() {
        if (this.searchCtrl.value) {
            this.filterResources(this.searchCtrl.value);
        }
        this.tableRows = [];
        for (const resource of this.filteredResources) {
            const cells = [];
            for (const field of this.resourceFields) {
                cells.push({
                    type: 'resource',
                    resource: resource,
                    text: resource[field],
                });
            }
            this.resourceWidth = 100 * this.resourceFields.length;
            this.tableRows.push({ resource: resource, items: cells });
        }
        this.itemHeaders = [];
        for (const i = this.startOfCalendar.clone(); i.isBefore(this.endOfCalendar); i.add(1, "day")) {
            this.itemHeaders.push({
                date: i.clone(),
                dayOfWeek: i.day(),
                currentDate: i.date(),
            });
        }
        for (const row of this.tableRows) {
            for (const header of this.itemHeaders) {
                const cell = {
                    type: 'item',
                    resource: row.resource,
                    header: header,
                    items: [],
                };
                row.items.push(cell);
                const items = this.items.filter(x => x.resource_id === row?.resource?.id && (header.date.isSame(x.start_date, 'day') || (header.date.isSame(this.startOfCalendar, 'day') && this.startOfCalendar.isAfter(x.start_date))));
                for (const item of items) {
                    const duration = moment.duration(item.end_date.diff(item.start_date));
                    const hours = duration.asHours();
                    let addPixels = 0;
                    if (moment(item.end_date).isAfter(this.endOfCalendar)) {
                        const offsetDuration = moment.duration(this.endOfCalendar.diff(item.end_date));
                        const offsetHours = offsetDuration.asHours();
                        addPixels = offsetHours / 24 * this.itemWidth;
                    }
                    let substract = 0;
                    if (this.startOfCalendar.isAfter(item.start_date)) {
                        const inHours = moment.duration(this.startOfCalendar.diff(item.start_date));
                        const diffHours = inHours.asHours();
                        substract = diffHours / 24 * this.itemWidth;
                    }
                    // @ts-ignore
                    cell.items.push({
                        ...item,
                        _width: ((hours / 24) * this.itemWidth) + addPixels - substract,
                        _left: substract ? this.itemLeft : this.itemWidth / 24 * moment(item.start_date).get("hours"),
                    });
                }
            }
        }
        this.unassignedItems = this.items.filter(x => x.resource_id == null).filter(x => x.text === "HOLD");
    }
    handleFormSearch() {
        this.searchCtrl.valueChanges
            .pipe(debounceTime(125), distinctUntilChanged())
            .subscribe(value => {
            this.filterResources(value);
            this.generateTable();
        });
    }
    // @ts-ignore
    filterResources(value) {
        if (value === null) {
            return true;
        }
        this.filteredResources = this.resources.filter(resource => {
            const { Category, Code, id, Number } = resource;
            const resourceInformation = (Category + Code + id + Number).toLowerCase();
            return resourceInformation.includes(value?.toLowerCase());
        });
    }
}
NgxTableSchedulerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.11", ngImport: i0, type: NgxTableSchedulerComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
NgxTableSchedulerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.3.11", type: NgxTableSchedulerComponent, selector: "ngx-table-scheduler", inputs: { startOfCalendar: "startOfCalendar", endOfCalendar: "endOfCalendar", currentDate: "currentDate", unassignedItems: "unassignedItems", defaultValue: "defaultValue", currentHours: "currentHours", resources: "resources", resourceFields: "resourceFields", items: "items", showSearchFilter: "showSearchFilter", itemWidth: "itemWidth", itemHeight: "itemHeight", filter: "filter", noAvailableSlots: "noAvailableSlots" }, outputs: { itemAssigned: "itemAssigned", itemDeleted: "itemDeleted" }, queries: [{ propertyName: "itemTemplateRef", first: true, predicate: ["itemTemplate"], descendants: true }, { propertyName: "itemContentTemplateRef", first: true, predicate: ["itemContentTemplate"], descendants: true }], viewQueries: [{ propertyName: "table", first: true, predicate: ["table"], descendants: true, read: ElementRef }], usesOnChanges: true, ngImport: i0, template: "<div class=\"table-outer\">\n  <div class=\"table-inner\" #table [ngStyle]=\"{'margin-left.px':resourceWidth}\">\n    <table>\n      <tr>\n        <th *ngFor=\"let field of resourceFields\" class=\"resource-header\">{{field}}</th>\n        <th *ngFor=\"let date of itemHeaders\" class=\"item-header\" [style.width.px]=\"itemWidth\"\n            [class.currentDay]=\"date.currentDate == currentDate.getDate()\"\n            [class.weekend]=\"date.dayOfWeek==0 || date.dayOfWeek==6\">\n          {{ date.date   | amDateFormat : ' MMM  d '}}\n        </th>\n      </tr>\n\n      <tr *ngFor=\"let row of tableRows\">\n        <td *ngFor=\"let cell of row.items\"\n            [class.resource-cell]=\"cell.type == 'resource'\"\n            [class.item-cell]=\"cell.type == 'item'\"\n            [class.weekend]=\"cell?.header?.dayOfWeek == 0 || cell?.header?.dayOfWeek == 6\"\n            [class.currentDay]=\"cell?.header?.currentDate == currentDate.getDate()\"\n            [style.width.px]=\"cell.type == 'item' && itemWidth \"\n            [style.height.px]=\"(cell.type ==='item' || cell.type === 'resource') && itemHeight\">\n          <span *ngIf=\"!cell.items || cell.items.length == 0\">{{cell.text}}</span>\n          <span>\n                          <ng-template #defaultItemTemplateContent let-item>\n                <div *ngIf=\"item.temporary\" class=\"check icon\"></div>\n                            {{item?.id == selectedItem?.id && row.resource?.id == selectedItem?.resource_id ? '' : item?.text }}\n              </ng-template>\n              <ng-template #defaultItemTemplate let-item let-i>\n                <div class=\"default-item\"\n                     (click)=\"itemClick(item)\"\n                     [class.selected-item]=\"item?.id == selectedItem?.id  && row.resource.id == selectedItem?.resource_id\"\n                     [ngStyle]=\"{ 'left.px': item._left, 'width.px': item._width, 'background-color': item?.color}\">\n                    <ng-container\n                      [ngTemplateOutlet]=\"itemContentTemplateRef || defaultItemTemplateContent\"\n                      [ngTemplateOutletContext]=\"{ $implicit: item, index: i}\">\n                   </ng-container>\n                </div>\n              </ng-template>\n              <ng-container\n                *ngFor=\"let item of cell.items;let i=index\"\n                [ngTemplateOutlet]=\"itemTemplateRef || defaultItemTemplate\"\n                [ngTemplateOutletContext]=\"{ $implicit: item, index: i}\">\n             </ng-container>\n         </span>\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div class=\"row\">\n    <div class=\"col text-right mr-2\">\n      {{this.startOfCalendar  | amDateFormat}}\n      <svg style=\"width:24px;height:24px\" viewBox=\"0 0 24 24\">\n        <path fill=\"currentColor\" d=\"M14 16.94V12.94H5.08L5.05 10.93H14V6.94L19 11.94Z\"/>\n      </svg>\n      {{this.endOfCalendar  | amDateFormat }}\n    </div>\n  </div>\n</div>\n\n<div class=\"no-car-exists\" *ngIf=\"filteredResources.length == 0\">\n  {{this.filteredResources.length == 0 ? \"No results found with this car resource\" : \"\"}}\n</div>\n", styles: [".table-outer{position:relative;border:1px solid #ccc}.table-outer .table-inner{overflow-x:scroll;overflow-y:visible;border-left:1px solid #ccc}.table-outer .table-inner table{table-layout:fixed;width:100%;border-collapse:collapse;border-spacing:0;border-radius:20px}.table-outer .table-inner table td,.table-outer .table-inner table th{border-top:unset;vertical-align:top;text-align:center;border-bottom:1px solid #ccc;padding:10px 0;border-left:1px solid #ccc}.table-outer .table-inner table td td:hover,.table-outer .table-inner table th td:hover{background-color:#ff0}.table-outer .table-inner table td:first-child,.table-outer .table-inner table th:first-child{border-left:0px!important}.table-outer .table-inner table .resource-cell,.table-outer .table-inner table .item-cell{height:45px;line-height:25px}.table-outer .table-inner table .resource-header,.table-outer .table-inner table .resource-cell{position:absolute;width:100px}.table-outer .table-inner table .resource-header,.table-outer .table-inner table .resource-cell,.table-outer .table-inner table .item-header{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.table-outer .table-inner table .resource-header:nth-child(1),.table-outer .table-inner table .resource-cell:nth-child(1){left:0}.table-outer .table-inner table .resource-header:nth-child(2),.table-outer .table-inner table .resource-cell:nth-child(2){left:100px}.table-outer .table-inner table .resource-header:nth-child(3),.table-outer .table-inner table .resource-cell:nth-child(3){left:200px}.table-outer .table-inner table .resource-header:nth-child(4),.table-outer .table-inner table .resource-cell:nth-child(4){left:300px}.table-outer .table-inner table .item-cell,.table-outer .table-inner table .item-header{width:50px;position:relative}.table-outer .table-inner table .item-cell .event{position:absolute;left:0;height:20px;z-index:999;top:calc(50% - 10px)}.reserved-resource{width:117px;left:25%;background-color:#00f}.weekend{background-color:#ffe1064a}.currentDay{background-color:#b2fad4}.paragraph-style{color:#fff}.check.icon{color:#fff;position:absolute;margin-left:3px;margin-top:4px;width:14px;height:8px;border-bottom:solid 2px currentColor;border-left:solid 2px currentColor;transform:rotate(-45deg)}.float-container{display:flex;margin-bottom:10px}.flex-container{border-collapse:collapse;width:25%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;gap:3px}.unassigned-item{flex:3 0;overflow:auto}.size-item-list{background-color:#b0e0e6;transition:background-color .5s;border:1px solid rgba(0,0,0,.125);border-radius:8px;padding:10px;text-overflow:ellipsis;min-width:305px;float:left;font-size:12px;position:relative;display:block}.size-item-list:hover{background-color:#66f115ab}.form-control:focus{border-color:#68efdbcc;box-shadow:0 1px 1px #00000013 inset,0 0 8px #68dbef99;outline:0 none}.input-search{width:50%;box-sizing:border-box;border:2px solid #ccc;border-radius:8px;background-image:url(/assets/img/icons8-search-30.png);background-position:7px 7px;background-repeat:no-repeat;font-size:16px;background-color:#fff;padding:12px 20px 12px 40px;transition:width .5s ease-in-out}.input-search:focus{width:100%;border-color:#59aff6cc;box-shadow:0 1px 1px #00000013 inset,0 0 8px #68efeb99;outline:0 none}.search-icon{width:31px;height:47px}.search-input{flex:1 0}.no-car-exists{background:#c7c5c5;padding:10px;border-radius:10px;text-align:center;margin-top:30px}.list-style{flex-direction:row;gap:7px;display:flex;padding-left:0;margin-bottom:0}.assign-button{color:#fff;background-color:#0069d9;border-color:#0062cc;margin-left:3px;border-radius:5px;box-shadow:0 8px 16px #0003,0 6px 20px #00000030}.delete-icon{width:24px;height:20px;float:right;cursor:pointer}.delete-icon:hover{transition-timing-function:ease-out;transition:.25s;transform:translateY(-5px)}table .item-cell ::ng-deep .default-item{position:absolute;left:0;height:20px;z-index:999;top:calc(50% - 10px)}.text-right{text-align:right}\n"], directives: [{ type: i1.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }], pipes: { "amDateFormat": i2.DateFormatPipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.11", ngImport: i0, type: NgxTableSchedulerComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ngx-table-scheduler', template: "<div class=\"table-outer\">\n  <div class=\"table-inner\" #table [ngStyle]=\"{'margin-left.px':resourceWidth}\">\n    <table>\n      <tr>\n        <th *ngFor=\"let field of resourceFields\" class=\"resource-header\">{{field}}</th>\n        <th *ngFor=\"let date of itemHeaders\" class=\"item-header\" [style.width.px]=\"itemWidth\"\n            [class.currentDay]=\"date.currentDate == currentDate.getDate()\"\n            [class.weekend]=\"date.dayOfWeek==0 || date.dayOfWeek==6\">\n          {{ date.date   | amDateFormat : ' MMM  d '}}\n        </th>\n      </tr>\n\n      <tr *ngFor=\"let row of tableRows\">\n        <td *ngFor=\"let cell of row.items\"\n            [class.resource-cell]=\"cell.type == 'resource'\"\n            [class.item-cell]=\"cell.type == 'item'\"\n            [class.weekend]=\"cell?.header?.dayOfWeek == 0 || cell?.header?.dayOfWeek == 6\"\n            [class.currentDay]=\"cell?.header?.currentDate == currentDate.getDate()\"\n            [style.width.px]=\"cell.type == 'item' && itemWidth \"\n            [style.height.px]=\"(cell.type ==='item' || cell.type === 'resource') && itemHeight\">\n          <span *ngIf=\"!cell.items || cell.items.length == 0\">{{cell.text}}</span>\n          <span>\n                          <ng-template #defaultItemTemplateContent let-item>\n                <div *ngIf=\"item.temporary\" class=\"check icon\"></div>\n                            {{item?.id == selectedItem?.id && row.resource?.id == selectedItem?.resource_id ? '' : item?.text }}\n              </ng-template>\n              <ng-template #defaultItemTemplate let-item let-i>\n                <div class=\"default-item\"\n                     (click)=\"itemClick(item)\"\n                     [class.selected-item]=\"item?.id == selectedItem?.id  && row.resource.id == selectedItem?.resource_id\"\n                     [ngStyle]=\"{ 'left.px': item._left, 'width.px': item._width, 'background-color': item?.color}\">\n                    <ng-container\n                      [ngTemplateOutlet]=\"itemContentTemplateRef || defaultItemTemplateContent\"\n                      [ngTemplateOutletContext]=\"{ $implicit: item, index: i}\">\n                   </ng-container>\n                </div>\n              </ng-template>\n              <ng-container\n                *ngFor=\"let item of cell.items;let i=index\"\n                [ngTemplateOutlet]=\"itemTemplateRef || defaultItemTemplate\"\n                [ngTemplateOutletContext]=\"{ $implicit: item, index: i}\">\n             </ng-container>\n         </span>\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div class=\"row\">\n    <div class=\"col text-right mr-2\">\n      {{this.startOfCalendar  | amDateFormat}}\n      <svg style=\"width:24px;height:24px\" viewBox=\"0 0 24 24\">\n        <path fill=\"currentColor\" d=\"M14 16.94V12.94H5.08L5.05 10.93H14V6.94L19 11.94Z\"/>\n      </svg>\n      {{this.endOfCalendar  | amDateFormat }}\n    </div>\n  </div>\n</div>\n\n<div class=\"no-car-exists\" *ngIf=\"filteredResources.length == 0\">\n  {{this.filteredResources.length == 0 ? \"No results found with this car resource\" : \"\"}}\n</div>\n", styles: [".table-outer{position:relative;border:1px solid #ccc}.table-outer .table-inner{overflow-x:scroll;overflow-y:visible;border-left:1px solid #ccc}.table-outer .table-inner table{table-layout:fixed;width:100%;border-collapse:collapse;border-spacing:0;border-radius:20px}.table-outer .table-inner table td,.table-outer .table-inner table th{border-top:unset;vertical-align:top;text-align:center;border-bottom:1px solid #ccc;padding:10px 0;border-left:1px solid #ccc}.table-outer .table-inner table td td:hover,.table-outer .table-inner table th td:hover{background-color:#ff0}.table-outer .table-inner table td:first-child,.table-outer .table-inner table th:first-child{border-left:0px!important}.table-outer .table-inner table .resource-cell,.table-outer .table-inner table .item-cell{height:45px;line-height:25px}.table-outer .table-inner table .resource-header,.table-outer .table-inner table .resource-cell{position:absolute;width:100px}.table-outer .table-inner table .resource-header,.table-outer .table-inner table .resource-cell,.table-outer .table-inner table .item-header{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.table-outer .table-inner table .resource-header:nth-child(1),.table-outer .table-inner table .resource-cell:nth-child(1){left:0}.table-outer .table-inner table .resource-header:nth-child(2),.table-outer .table-inner table .resource-cell:nth-child(2){left:100px}.table-outer .table-inner table .resource-header:nth-child(3),.table-outer .table-inner table .resource-cell:nth-child(3){left:200px}.table-outer .table-inner table .resource-header:nth-child(4),.table-outer .table-inner table .resource-cell:nth-child(4){left:300px}.table-outer .table-inner table .item-cell,.table-outer .table-inner table .item-header{width:50px;position:relative}.table-outer .table-inner table .item-cell .event{position:absolute;left:0;height:20px;z-index:999;top:calc(50% - 10px)}.reserved-resource{width:117px;left:25%;background-color:#00f}.weekend{background-color:#ffe1064a}.currentDay{background-color:#b2fad4}.paragraph-style{color:#fff}.check.icon{color:#fff;position:absolute;margin-left:3px;margin-top:4px;width:14px;height:8px;border-bottom:solid 2px currentColor;border-left:solid 2px currentColor;transform:rotate(-45deg)}.float-container{display:flex;margin-bottom:10px}.flex-container{border-collapse:collapse;width:25%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;gap:3px}.unassigned-item{flex:3 0;overflow:auto}.size-item-list{background-color:#b0e0e6;transition:background-color .5s;border:1px solid rgba(0,0,0,.125);border-radius:8px;padding:10px;text-overflow:ellipsis;min-width:305px;float:left;font-size:12px;position:relative;display:block}.size-item-list:hover{background-color:#66f115ab}.form-control:focus{border-color:#68efdbcc;box-shadow:0 1px 1px #00000013 inset,0 0 8px #68dbef99;outline:0 none}.input-search{width:50%;box-sizing:border-box;border:2px solid #ccc;border-radius:8px;background-image:url(/assets/img/icons8-search-30.png);background-position:7px 7px;background-repeat:no-repeat;font-size:16px;background-color:#fff;padding:12px 20px 12px 40px;transition:width .5s ease-in-out}.input-search:focus{width:100%;border-color:#59aff6cc;box-shadow:0 1px 1px #00000013 inset,0 0 8px #68efeb99;outline:0 none}.search-icon{width:31px;height:47px}.search-input{flex:1 0}.no-car-exists{background:#c7c5c5;padding:10px;border-radius:10px;text-align:center;margin-top:30px}.list-style{flex-direction:row;gap:7px;display:flex;padding-left:0;margin-bottom:0}.assign-button{color:#fff;background-color:#0069d9;border-color:#0062cc;margin-left:3px;border-radius:5px;box-shadow:0 8px 16px #0003,0 6px 20px #00000030}.delete-icon{width:24px;height:20px;float:right;cursor:pointer}.delete-icon:hover{transition-timing-function:ease-out;transition:.25s;transform:translateY(-5px)}table .item-cell ::ng-deep .default-item{position:absolute;left:0;height:20px;z-index:999;top:calc(50% - 10px)}.text-right{text-align:right}\n"] }]
        }], ctorParameters: function () { return []; }, propDecorators: { startOfCalendar: [{
                type: Input
            }], endOfCalendar: [{
                type: Input
            }], currentDate: [{
                type: Input
            }], unassignedItems: [{
                type: Input
            }], defaultValue: [{
                type: Input
            }], currentHours: [{
                type: Input
            }], resources: [{
                type: Input
            }], resourceFields: [{
                type: Input
            }], items: [{
                type: Input
            }], showSearchFilter: [{
                type: Input
            }], itemWidth: [{
                type: Input
            }], itemHeight: [{
                type: Input
            }], table: [{
                type: ViewChild,
                args: ['table', { read: ElementRef }]
            }], filter: [{
                type: Input
            }], itemTemplateRef: [{
                type: ContentChild,
                args: ["itemTemplate", { static: false }]
            }], itemContentTemplateRef: [{
                type: ContentChild,
                args: ["itemContentTemplate", { static: false }]
            }], itemAssigned: [{
                type: Output
            }], itemDeleted: [{
                type: Output
            }], noAvailableSlots: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXRhYmxlLXNjaGVkdWxlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtY2FsZW5kYXItc2NoZWR1bGVyL3NyYy9saWIvbmd4LXRhYmxlLXNjaGVkdWxlci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtY2FsZW5kYXItc2NoZWR1bGVyL3NyYy9saWIvbmd4LXRhYmxlLXNjaGVkdWxlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUNULEtBQUssRUFFTCxNQUFNLEVBQ04sWUFBWSxFQUNaLFNBQVMsRUFDVCxVQUFVLEVBRVYsWUFBWSxFQUViLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sS0FBSyxNQUFNLE1BQU0sUUFBUSxDQUFDO0FBQ2pDLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUMsWUFBWSxFQUFFLG9CQUFvQixFQUFDLE1BQU0sZ0JBQWdCLENBQUM7Ozs7QUFvQmxFLE1BQU0sT0FBTywwQkFBMEI7SUEwQ3JDO1FBbkNTLGNBQVMsR0FBVSxFQUFFLENBQUM7UUFDdEIsbUJBQWMsR0FBVSxFQUFFLENBQUM7UUFDM0IsVUFBSyxHQUFVLEVBQUUsQ0FBQztRQUNsQixxQkFBZ0IsR0FBWSxLQUFLLENBQUM7UUFpQmpDLGlCQUFZLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7UUFDckQsZ0JBQVcsR0FBc0IsSUFBSSxZQUFZLEVBQUUsQ0FBQTtRQUU3RCxhQUFRLEdBQUcsQ0FBQyxDQUFDO1FBQ2IsY0FBUyxHQUFVLEVBQUUsQ0FBQztRQUN0QixnQkFBVyxHQUFVLEVBQUUsQ0FBQztRQUV4QixzQkFBaUIsR0FBUSxFQUFFLENBQUM7UUFDNUIsZUFBVSxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7UUFFL0IsaUJBQVksR0FBUSxJQUFJLENB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LE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQzFFLE9BQU8sbUJBQW1CLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxXQUFXLEVBQUUsQ0FBQyxDQUFDO1FBQzVELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQzs7d0hBL05VLDBCQUEwQjs0R0FBMUIsMEJBQTBCLGcxQkFjVixVQUFVLGtEQ2hEdkMsNmtHQTZEQTs0RkQzQmEsMEJBQTBCO2tCQUx0QyxTQUFTOytCQUNFLHFCQUFxQjswRUFLdEIsZUFBZTtzQkFBdkIsS0FBSztnQkFDRyxhQUFhO3NCQUFyQixLQUFLO2dCQUNHLFdBQVc7c0JBQW5CLEtBQUs7Z0JBQ0csZUFBZTtzQkFBdkIsS0FBSztnQkFDRyxZQUFZO3NCQUFwQixLQUFLO2dCQUNHLFlBQVk7c0JBQXBCLEtBQUs7Z0JBQ0csU0FBUztzQkFBakIsS0FBSztnQkFDRyxjQUFjO3NCQUF0QixLQUFLO2dCQUNHLEtBQUs7c0JBQWIsS0FBSztnQkFDRyxnQkFBZ0I7c0JBQXhCLEtBQUs7Z0JBQ0csU0FBUztzQkFBakIsS0FBSztnQkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUV5QyxLQUFLO3NCQUFuRCxTQUFTO3VCQUFDLE9BQU8sRUFBRSxFQUFDLElBQUksRUFBRSxVQUFVLEVBQUM7Z0JBRXpCLE1BQU07c0JBQWxCLEtBQUs7Z0JBUXlDLGVBQWU7c0JBQTdELFlBQVk7dUJBQUMsY0FBYyxFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQztnQkFDUyxzQkFBc0I7c0JBQTNFLFlBQVk7dUJBQUMscUJBQXFCLEVBQUUsRUFBQyxNQUFNLEVBQUUsS0FBSyxFQUFDO2dCQUUxQyxZQUFZO3NCQUFyQixNQUFNO2dCQUNHLFdBQVc7c0JBQXBCLE1BQU07Z0JBV0UsZ0JBQWdCO3NCQUF4QixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBJbnB1dCxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIEV2ZW50RW1pdHRlcixcbiAgVmlld0NoaWxkLFxuICBFbGVtZW50UmVmLFxuICBTaW1wbGVDaGFuZ2VzLFxuICBDb250ZW50Q2hpbGQsXG4gIFRlbXBsYXRlUmVmXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQge0Zvcm1Db250cm9sfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQge2RlYm91bmNlVGltZSwgZGlzdGluY3RVbnRpbENoYW5nZWR9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW50ZXJmYWNlIFJvdyB7XG4gIHJlc291cmNlOiBhbnk7XG4gIGl0ZW1zOiBDZWxsW10gfCBhbnk7XG59XG5cbmludGVyZmFjZSBDZWxsIHtcbiAgdHlwZTogJ2l0ZW0nIHwgJ3Jlc291cmNlJztcbiAgcmVzb3VyY2U/OiBhbnlbXVxuICBoZWFkZXI/OiBhbnk7XG4gIGl0ZW1zPzogYW55W107XG4gIHRleHQ/OiBzdHJpbmc7XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25neC10YWJsZS1zY2hlZHVsZXInLFxuICB0ZW1wbGF0ZVVybDogJ25neC10YWJsZS1zY2hlZHVsZXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnbmd4LXRhYmxlLXNjaGVkdWxlci5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIE5neFRhYmxlU2NoZWR1bGVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgc3RhcnRPZkNhbGVuZGFyOiBhbnk7XG4gIEBJbnB1dCgpIGVuZE9mQ2FsZW5kYXI6IGFueTtcbiAgQElucHV0KCkgY3VycmVudERhdGU6IGFueTtcbiAgQElucHV0KCkgdW5hc3NpZ25lZEl0ZW1zOiBhbnk7XG4gIEBJbnB1dCgpIGRlZmF1bHRWYWx1ZTogYW55O1xuICBASW5wdXQoKSBjdXJyZW50SG91cnM6IGFueTtcbiAgQElucHV0KCkgcmVzb3VyY2VzOiBhbnlbXSA9IFtdO1xuICBASW5wdXQoKSByZXNvdXJjZUZpZWxkczogYW55W10gPSBbXTtcbiAgQElucHV0KCkgaXRlbXM6IGFueVtdID0gW107XG4gIEBJbnB1dCgpIHNob3dTZWFyY2hGaWx0ZXI6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgaXRlbVdpZHRoOiBhbnk7XG4gIEBJbnB1dCgpIGl0ZW1IZWlnaHQ6IGFueVxuXG4gIEBWaWV3Q2hpbGQoJ3RhYmxlJywge3JlYWQ6IEVsZW1lbnRSZWZ9KSBwdWJsaWMgdGFibGU6IEVsZW1lbnRSZWY8YW55PiB8IGFueTtcblxuICBASW5wdXQoKSBzZXQgZmlsdGVyKGZpbHRlcjogc3RyaW5nKSB7XG4gICAgdGhpcy5zZWFyY2hDdHJsLnNldFZhbHVlKGZpbHRlcik7XG4gICAgaWYgKHRoaXMudGFibGVSb3dzKSB7XG4gICAgICB0aGlzLmZpbHRlclJlc291cmNlcyhmaWx0ZXIpO1xuICAgICAgdGhpcy5nZW5lcmF0ZVRhYmxlKCk7XG4gICAgfVxuICB9XG5cbiAgQENvbnRlbnRDaGlsZChcIml0ZW1UZW1wbGF0ZVwiLCB7c3RhdGljOiBmYWxzZX0pIGl0ZW1UZW1wbGF0ZVJlZjogVGVtcGxhdGVSZWY8YW55PiB8IGFueTtcbiAgQENvbnRlbnRDaGlsZChcIml0ZW1Db250ZW50VGVtcGxhdGVcIiwge3N0YXRpYzogZmFsc2V9KSBpdGVtQ29udGVudFRlbXBsYXRlUmVmOiBUZW1wbGF0ZVJlZjxhbnk+IHwgYW55O1xuXG4gIEBPdXRwdXQoKSBpdGVtQXNzaWduZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgaXRlbURlbGV0ZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpXG5cbiAgaXRlbUxlZnQgPSAwO1xuICB0YWJsZVJvd3M6IFJvd1tdID0gW107XG4gIGl0ZW1IZWFkZXJzOiBhbnlbXSA9IFtdO1xuXG4gIGZpbHRlcmVkUmVzb3VyY2VzOiBhbnkgPSBbXTtcbiAgc2VhcmNoQ3RybCA9IG5ldyBGb3JtQ29udHJvbCgpO1xuXG4gIHNlbGVjdGVkSXRlbTogYW55ID0gbnVsbDtcbiAgcmVzb3VyY2VXaWR0aDogYW55O1xuICBASW5wdXQoKSBub0F2YWlsYWJsZVNsb3RzOiBhbnk7XG5cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICB9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5oYW5kbGVGb3JtU2VhcmNoKCk7XG4gICAgdGhpcy5maWx0ZXJlZFJlc291cmNlcyA9IHRoaXMucmVzb3VyY2VzXG4gICAgdGhpcy5nZW5lcmF0ZVRhYmxlKCk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgbGV0IHNob3VsZEdlbmVyYXRlID0gZmFsc2U7XG4gICAgaWYgKGNoYW5nZXNbJ3N0YXJ0T2ZDYWxlbmRhciddICYmICEodGhpcy5zdGFydE9mQ2FsZW5kYXIgaW5zdGFuY2VvZiBtb21lbnQpKSB7XG4gICAgICB0aGlzLnN0YXJ0T2ZDYWxlbmRhciA9IG1vbWVudCh0aGlzLnN0YXJ0T2ZDYWxlbmRhcik7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzWydlbmRPZkNhbGVuZGFyJ10gJiYgISh0aGlzLmVuZE9mQ2FsZW5kYXIgaW5zdGFuY2VvZiBtb21lbnQpKSB7XG4gICAgICB0aGlzLmVuZE9mQ2FsZW5kYXIgPSBtb21lbnQodGhpcy5lbmRPZkNhbGVuZGFyKTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXNbJ2l0ZW1zJ10pIHtcbiAgICAgIHNob3VsZEdlbmVyYXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXNbJ3Jlc291cmNlcyddKSB7XG4gICAgICB0aGlzLmZpbHRlcmVkUmVzb3VyY2VzID0gdGhpcy5yZXNvdXJjZXM7XG4gICAgICBzaG91bGRHZW5lcmF0ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHNob3VsZEdlbmVyYXRlKVxuICAgICAgdGhpcy5nZW5lcmF0ZVRhYmxlKCk7XG4gIH1cblxuICBwcmVwYXJlQXNzaWduSXRlbShpdGVtOiBhbnkpIHtcbiAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5maWx0ZXIoaSA9PiAhaS50ZW1wb3JhcnkpO1xuICAgIHRoaXMubm9BdmFpbGFibGVTbG90cyA9IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtPy5pZCA9PT0gaXRlbS5pZCkge1xuICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSBudWxsO1xuICAgICAgdGhpcy5nZW5lcmF0ZVRhYmxlKClcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSBpdGVtO1xuICAgIGZvciAoY29uc3QgcmVzb3VyY2Ugb2YgdGhpcy5yZXNvdXJjZXMpIHtcbiAgICAgIGNvbnN0IHJlc291cmNlSXRlbXMgPSB0aGlzLml0ZW1zLmZpbHRlcih4ID0+IHgucmVzb3VyY2VfaWQgPT09IHJlc291cmNlLmlkKVxuICAgICAgbGV0IHF1YWxpZmllcyA9IHRydWU7XG5cbiAgICAgIGZvciAoY29uc3QgcmVzb3VyY2VJdGVtIG9mIHJlc291cmNlSXRlbXMpIHtcbiAgICAgICAgaWYgKG1vbWVudChyZXNvdXJjZUl0ZW0uc3RhcnRfZGF0ZSkuaXNCZWZvcmUoaXRlbS5lbmRfZGF0ZSkgJiYgbW9tZW50KHJlc291cmNlSXRlbS5lbmRfZGF0ZSkuaXNBZnRlcihpdGVtLnN0YXJ0X2RhdGUpKVxuICAgICAgICAgIHF1YWxpZmllcyA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXF1YWxpZmllcylcbiAgICAgICAgY29udGludWU7XG4gICAgICB0aGlzLml0ZW1zLnB1c2goe1xuICAgICAgICAuLi5pdGVtLFxuICAgICAgICByZXNvdXJjZV9pZDogcmVzb3VyY2UuaWQsXG4gICAgICAgIHRlbXBvcmFyeTogdHJ1ZSxcbiAgICAgICAgY29sb3I6ICdyZ2IoMTYyIDE1NSAxNzggLyA2MiUpJyxcblxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc3QgdGVtcG9yYXJ5SXRlbSA9IHRoaXMuaXRlbXMuZmlsdGVyKHggPT4geC50ZW1wb3JhcnkpXG5cbiAgICBpZiAodGVtcG9yYXJ5SXRlbS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMubm9BdmFpbGFibGVTbG90cyA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5nZW5lcmF0ZVRhYmxlKCk7XG4gICAgaWYgKHRoaXMuc2VhcmNoQ3RybC52YWx1ZSkge1xuICAgICAgdGhpcy5maWx0ZXJSZXNvdXJjZXModGhpcy5zZWFyY2hDdHJsLnZhbHVlKTtcbiAgICB9XG4gICAgLy8gU2Nyb2xsIHRvIGV2ZW50XG4gICAgY29uc3QgZGlmZmVyZW5jZUluUGl4ZWwgPSBtb21lbnQoaXRlbS5zdGFydF9kYXRlKS5kaWZmKHRoaXMuc3RhcnRPZkNhbGVuZGFyLCAnZGF5cycpICogdGhpcy5pdGVtV2lkdGg7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnRhYmxlLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA9IGRpZmZlcmVuY2VJblBpeGVsO1xuICAgIH0sIDUwKTtcbiAgfVxuXG4gIGl0ZW1DbGljayhpdGVtOiBhbnkpIHtcbiAgICBpZiAoIWl0ZW0udGVtcG9yYXJ5KVxuICAgICAgcmV0dXJuO1xuICAgIHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zLmZpbHRlcihpID0+ICFpLnRlbXBvcmFyeSk7XG4gICAgdGhpcy5pdGVtcy5maW5kKGkgPT4gaS5pZCA9PT0gaXRlbT8uaWQpLnJlc291cmNlX2lkID0gaXRlbT8ucmVzb3VyY2VfaWQ7XG4gICAgY29uc29sZS5sb2coJ2knLCBpdGVtKVxuXG4gICAgdGhpcy5nZW5lcmF0ZVRhYmxlKCk7XG4gICAgdGhpcy5pdGVtQXNzaWduZWQuZW1pdChpdGVtKTtcbiAgfVxuXG4gIHB1YmxpYyBnZW5lcmF0ZVRhYmxlKCkge1xuICAgIGlmICh0aGlzLnNlYXJjaEN0cmwudmFsdWUpIHtcbiAgICAgIHRoaXMuZmlsdGVyUmVzb3VyY2VzKHRoaXMuc2VhcmNoQ3RybC52YWx1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy50YWJsZVJvd3MgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHJlc291cmNlIG9mIHRoaXMuZmlsdGVyZWRSZXNvdXJjZXMpIHtcbiAgICAgIGNvbnN0IGNlbGxzOiBDZWxsW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgdGhpcy5yZXNvdXJjZUZpZWxkcykge1xuICAgICAgICBjZWxscy5wdXNoKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6ICdyZXNvdXJjZScsXG4gICAgICAgICAgICByZXNvdXJjZTogcmVzb3VyY2UsXG4gICAgICAgICAgICB0ZXh0OiByZXNvdXJjZVtmaWVsZF0sXG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlc291cmNlV2lkdGggPSAxMDAgKiB0aGlzLnJlc291cmNlRmllbGRzLmxlbmd0aDtcbiAgICAgIHRoaXMudGFibGVSb3dzLnB1c2goe3Jlc291cmNlOiByZXNvdXJjZSwgaXRlbXM6IGNlbGxzfSk7XG4gICAgfVxuXG4gICAgdGhpcy5pdGVtSGVhZGVycyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBpID0gdGhpcy5zdGFydE9mQ2FsZW5kYXIuY2xvbmUoKTsgaS5pc0JlZm9yZSh0aGlzLmVuZE9mQ2FsZW5kYXIpOyBpLmFkZCgxLCBcImRheVwiKSkge1xuICAgICAgdGhpcy5pdGVtSGVhZGVycy5wdXNoKHtcbiAgICAgICAgZGF0ZTogaS5jbG9uZSgpLFxuICAgICAgICBkYXlPZldlZWs6IGkuZGF5KCksXG4gICAgICAgIGN1cnJlbnREYXRlOiBpLmRhdGUoKSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZvciAoY29uc3Qgcm93IG9mIHRoaXMudGFibGVSb3dzKSB7XG4gICAgICBmb3IgKGNvbnN0IGhlYWRlciBvZiB0aGlzLml0ZW1IZWFkZXJzKSB7XG4gICAgICAgIGNvbnN0IGNlbGw6IENlbGwgPSB7XG4gICAgICAgICAgdHlwZTogJ2l0ZW0nLFxuICAgICAgICAgIHJlc291cmNlOiByb3cucmVzb3VyY2UsXG4gICAgICAgICAgaGVhZGVyOiBoZWFkZXIsXG4gICAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgICB9O1xuICAgICAgICByb3cuaXRlbXMucHVzaChjZWxsKTtcbiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLml0ZW1zLmZpbHRlcih4ID0+IHgucmVzb3VyY2VfaWQgPT09IHJvdz8ucmVzb3VyY2U/LmlkICYmIChoZWFkZXIuZGF0ZS5pc1NhbWUoeC5zdGFydF9kYXRlLCAnZGF5JykgfHwgKGhlYWRlci5kYXRlLmlzU2FtZSh0aGlzLnN0YXJ0T2ZDYWxlbmRhciwgJ2RheScpICYmIHRoaXMuc3RhcnRPZkNhbGVuZGFyLmlzQWZ0ZXIoeC5zdGFydF9kYXRlKSkpKVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IG1vbWVudC5kdXJhdGlvbihpdGVtLmVuZF9kYXRlLmRpZmYoaXRlbS5zdGFydF9kYXRlKSk7XG4gICAgICAgICAgY29uc3QgaG91cnMgPSBkdXJhdGlvbi5hc0hvdXJzKCk7XG5cbiAgICAgICAgICBsZXQgYWRkUGl4ZWxzID0gMDtcbiAgICAgICAgICBpZiAobW9tZW50KGl0ZW0uZW5kX2RhdGUpLmlzQWZ0ZXIodGhpcy5lbmRPZkNhbGVuZGFyKSkge1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0RHVyYXRpb24gPSBtb21lbnQuZHVyYXRpb24odGhpcy5lbmRPZkNhbGVuZGFyLmRpZmYoaXRlbS5lbmRfZGF0ZSkpO1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0SG91cnMgPSBvZmZzZXREdXJhdGlvbi5hc0hvdXJzKCk7XG4gICAgICAgICAgICBhZGRQaXhlbHMgPSBvZmZzZXRIb3VycyAvIDI0ICogdGhpcy5pdGVtV2lkdGg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IHN1YnN0cmFjdCA9IDA7XG4gICAgICAgICAgaWYgKHRoaXMuc3RhcnRPZkNhbGVuZGFyLmlzQWZ0ZXIoaXRlbS5zdGFydF9kYXRlKSkge1xuICAgICAgICAgICAgY29uc3QgaW5Ib3VycyA9IG1vbWVudC5kdXJhdGlvbih0aGlzLnN0YXJ0T2ZDYWxlbmRhci5kaWZmKGl0ZW0uc3RhcnRfZGF0ZSkpXG4gICAgICAgICAgICBjb25zdCBkaWZmSG91cnMgPSBpbkhvdXJzLmFzSG91cnMoKTtcbiAgICAgICAgICAgIHN1YnN0cmFjdCA9IGRpZmZIb3VycyAvIDI0ICogdGhpcy5pdGVtV2lkdGg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgIGNlbGwuaXRlbXMucHVzaCh7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgX3dpZHRoOiAoKGhvdXJzIC8gMjQpICogdGhpcy5pdGVtV2lkdGgpICsgYWRkUGl4ZWxzIC0gc3Vic3RyYWN0LFxuICAgICAgICAgICAgX2xlZnQ6IHN1YnN0cmFjdCA/IHRoaXMuaXRlbUxlZnQgOiB0aGlzLml0ZW1XaWR0aCAvIDI0ICogbW9tZW50KGl0ZW0uc3RhcnRfZGF0ZSkuZ2V0KFwiaG91cnNcIiksXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnVuYXNzaWduZWRJdGVtcyA9IHRoaXMuaXRlbXMuZmlsdGVyKHggPT4geC5yZXNvdXJjZV9pZCA9PSBudWxsKS5maWx0ZXIoeCA9PiB4LnRleHQgPT09IFwiSE9MRFwiKVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVGb3JtU2VhcmNoKCkge1xuICAgIHRoaXMuc2VhcmNoQ3RybC52YWx1ZUNoYW5nZXNcbiAgICAgIC5waXBlKFxuICAgICAgICBkZWJvdW5jZVRpbWUoMTI1KSxcbiAgICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUodmFsdWUgPT4ge1xuICAgICAgICB0aGlzLmZpbHRlclJlc291cmNlcyh2YWx1ZSlcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVRhYmxlKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vIEB0cy1pZ25vcmVcbiAgcHJpdmF0ZSBmaWx0ZXJSZXNvdXJjZXModmFsdWU6IGFueSkge1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHRoaXMuZmlsdGVyZWRSZXNvdXJjZXMgPSB0aGlzLnJlc291cmNlcy5maWx0ZXIocmVzb3VyY2UgPT4ge1xuICAgICAgY29uc3Qge0NhdGVnb3J5LCBDb2RlLCBpZCwgTnVtYmVyfSA9IHJlc291cmNlXG4gICAgICBjb25zdCByZXNvdXJjZUluZm9ybWF0aW9uID0gKENhdGVnb3J5ICsgQ29kZSArIGlkICsgTnVtYmVyKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIHJlc291cmNlSW5mb3JtYXRpb24uaW5jbHVkZXModmFsdWU/LnRvTG93ZXJDYXNlKCkpO1xuICAgIH0pO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwidGFibGUtb3V0ZXJcIj5cbiAgPGRpdiBjbGFzcz1cInRhYmxlLWlubmVyXCIgI3RhYmxlIFtuZ1N0eWxlXT1cInsnbWFyZ2luLWxlZnQucHgnOnJlc291cmNlV2lkdGh9XCI+XG4gICAgPHRhYmxlPlxuICAgICAgPHRyPlxuICAgICAgICA8dGggKm5nRm9yPVwibGV0IGZpZWxkIG9mIHJlc291cmNlRmllbGRzXCIgY2xhc3M9XCJyZXNvdXJjZS1oZWFkZXJcIj57e2ZpZWxkfX08L3RoPlxuICAgICAgICA8dGggKm5nRm9yPVwibGV0IGRhdGUgb2YgaXRlbUhlYWRlcnNcIiBjbGFzcz1cIml0ZW0taGVhZGVyXCIgW3N0eWxlLndpZHRoLnB4XT1cIml0ZW1XaWR0aFwiXG4gICAgICAgICAgICBbY2xhc3MuY3VycmVudERheV09XCJkYXRlLmN1cnJlbnREYXRlID09IGN1cnJlbnREYXRlLmdldERhdGUoKVwiXG4gICAgICAgICAgICBbY2xhc3Mud2Vla2VuZF09XCJkYXRlLmRheU9mV2Vlaz09MCB8fCBkYXRlLmRheU9mV2Vlaz09NlwiPlxuICAgICAgICAgIHt7IGRhdGUuZGF0ZSAgIHwgYW1EYXRlRm9ybWF0IDogJyBNTU0gIGQgJ319XG4gICAgICAgIDwvdGg+XG4gICAgICA8L3RyPlxuXG4gICAgICA8dHIgKm5nRm9yPVwibGV0IHJvdyBvZiB0YWJsZVJvd3NcIj5cbiAgICAgICAgPHRkICpuZ0Zvcj1cImxldCBjZWxsIG9mIHJvdy5pdGVtc1wiXG4gICAgICAgICAgICBbY2xhc3MucmVzb3VyY2UtY2VsbF09XCJjZWxsLnR5cGUgPT0gJ3Jlc291cmNlJ1wiXG4gICAgICAgICAgICBbY2xhc3MuaXRlbS1jZWxsXT1cImNlbGwudHlwZSA9PSAnaXRlbSdcIlxuICAgICAgICAgICAgW2NsYXNzLndlZWtlbmRdPVwiY2VsbD8uaGVhZGVyPy5kYXlPZldlZWsgPT0gMCB8fCBjZWxsPy5oZWFkZXI/LmRheU9mV2VlayA9PSA2XCJcbiAgICAgICAgICAgIFtjbGFzcy5jdXJyZW50RGF5XT1cImNlbGw/LmhlYWRlcj8uY3VycmVudERhdGUgPT0gY3VycmVudERhdGUuZ2V0RGF0ZSgpXCJcbiAgICAgICAgICAgIFtzdHlsZS53aWR0aC5weF09XCJjZWxsLnR5cGUgPT0gJ2l0ZW0nICYmIGl0ZW1XaWR0aCBcIlxuICAgICAgICAgICAgW3N0eWxlLmhlaWdodC5weF09XCIoY2VsbC50eXBlID09PSdpdGVtJyB8fCBjZWxsLnR5cGUgPT09ICdyZXNvdXJjZScpICYmIGl0ZW1IZWlnaHRcIj5cbiAgICAgICAgICA8c3BhbiAqbmdJZj1cIiFjZWxsLml0ZW1zIHx8IGNlbGwuaXRlbXMubGVuZ3RoID09IDBcIj57e2NlbGwudGV4dH19PC9zcGFuPlxuICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgI2RlZmF1bHRJdGVtVGVtcGxhdGVDb250ZW50IGxldC1pdGVtPlxuICAgICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJpdGVtLnRlbXBvcmFyeVwiIGNsYXNzPVwiY2hlY2sgaWNvblwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7aXRlbT8uaWQgPT0gc2VsZWN0ZWRJdGVtPy5pZCAmJiByb3cucmVzb3VyY2U/LmlkID09IHNlbGVjdGVkSXRlbT8ucmVzb3VyY2VfaWQgPyAnJyA6IGl0ZW0/LnRleHQgfX1cbiAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNkZWZhdWx0SXRlbVRlbXBsYXRlIGxldC1pdGVtIGxldC1pPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LWl0ZW1cIlxuICAgICAgICAgICAgICAgICAgICAgKGNsaWNrKT1cIml0ZW1DbGljayhpdGVtKVwiXG4gICAgICAgICAgICAgICAgICAgICBbY2xhc3Muc2VsZWN0ZWQtaXRlbV09XCJpdGVtPy5pZCA9PSBzZWxlY3RlZEl0ZW0/LmlkICAmJiByb3cucmVzb3VyY2UuaWQgPT0gc2VsZWN0ZWRJdGVtPy5yZXNvdXJjZV9pZFwiXG4gICAgICAgICAgICAgICAgICAgICBbbmdTdHlsZV09XCJ7ICdsZWZ0LnB4JzogaXRlbS5fbGVmdCwgJ3dpZHRoLnB4JzogaXRlbS5fd2lkdGgsICdiYWNrZ3JvdW5kLWNvbG9yJzogaXRlbT8uY29sb3J9XCI+XG4gICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJpdGVtQ29udGVudFRlbXBsYXRlUmVmIHx8IGRlZmF1bHRJdGVtVGVtcGxhdGVDb250ZW50XCJcbiAgICAgICAgICAgICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwieyAkaW1wbGljaXQ6IGl0ZW0sIGluZGV4OiBpfVwiPlxuICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IGl0ZW0gb2YgY2VsbC5pdGVtcztsZXQgaT1pbmRleFwiXG4gICAgICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwiaXRlbVRlbXBsYXRlUmVmIHx8IGRlZmF1bHRJdGVtVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7ICRpbXBsaWNpdDogaXRlbSwgaW5kZXg6IGl9XCI+XG4gICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvdGQ+XG4gICAgICA8L3RyPlxuICAgIDwvdGFibGU+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgPGRpdiBjbGFzcz1cImNvbCB0ZXh0LXJpZ2h0IG1yLTJcIj5cbiAgICAgIHt7dGhpcy5zdGFydE9mQ2FsZW5kYXIgIHwgYW1EYXRlRm9ybWF0fX1cbiAgICAgIDxzdmcgc3R5bGU9XCJ3aWR0aDoyNHB4O2hlaWdodDoyNHB4XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICA8cGF0aCBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0xNCAxNi45NFYxMi45NEg1LjA4TDUuMDUgMTAuOTNIMTRWNi45NEwxOSAxMS45NFpcIi8+XG4gICAgICA8L3N2Zz5cbiAgICAgIHt7dGhpcy5lbmRPZkNhbGVuZGFyICB8IGFtRGF0ZUZvcm1hdCB9fVxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuXG48ZGl2IGNsYXNzPVwibm8tY2FyLWV4aXN0c1wiICpuZ0lmPVwiZmlsdGVyZWRSZXNvdXJjZXMubGVuZ3RoID09IDBcIj5cbiAge3t0aGlzLmZpbHRlcmVkUmVzb3VyY2VzLmxlbmd0aCA9PSAwID8gXCJObyByZXN1bHRzIGZvdW5kIHdpdGggdGhpcyBjYXIgcmVzb3VyY2VcIiA6IFwiXCJ9fVxuPC9kaXY+XG4iXX0=