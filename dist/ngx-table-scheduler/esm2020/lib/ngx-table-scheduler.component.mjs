import { Component, Input, Output, EventEmitter, ViewChild, ElementRef, ContentChild } from '@angular/core';
import moment from 'moment';
import { FormControl } from '@angular/forms';
import { debounceTime, distinctUntilChanged } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "ngx-moment";
export class NgxTableSchedulerComponent {
    constructor() {
        this.resources = [];
        this.resourceFields = [];
        this.items = [];
        this.showSearchFilter = false;
        this.itemAssigned = new EventEmitter();
        this.itemDeleted = new EventEmitter();
        this.itemLeft = 0;
        this.tableRows = [];
        this.itemHeaders = [];
        this.filteredResources = [];
        this.searchCtrl = new FormControl();
        this.selectedItem = null;
    }
    set filter(filter) {
        this.searchCtrl.setValue(filter);
        if (this.tableRows) {
            this.filterResources(filter);
            this.generateTable();
        }
    }
    ngOnDestroy() {
    }
    ngOnInit() {
        this.handleFormSearch();
        this.filteredResources = this.resources;
        this.generateTable();
    }
    ngOnChanges(changes) {
        console.log(moment().toISOString());
        let shouldGenerate = false;
        if (changes['startOfCalendar'] && !(this.startOfCalendar instanceof moment)) {
            this.startOfCalendar = moment(this.startOfCalendar);
        }
        if (changes['endOfCalendar'] && !(this.endOfCalendar instanceof moment)) {
            this.endOfCalendar = moment(this.endOfCalendar);
        }
        if (changes['items']) {
            shouldGenerate = true;
        }
        if (changes['resources']) {
            this.filteredResources = this.resources;
            shouldGenerate = true;
        }
        if (shouldGenerate)
            this.generateTable();
    }
    prepareAssignItem(item) {
        this.items = this.items.filter(i => !i.temporary);
        this.noAvailableSlots = false;
        if (this.selectedItem?.id === item.id) {
            this.selectedItem = null;
            this.generateTable();
            return;
        }
        this.selectedItem = item;
        for (const resource of this.resources) {
            const resourceItems = this.items.filter(x => x.resource_id === resource.id);
            let qualifies = true;
            for (const resourceItem of resourceItems) {
                if (moment(resourceItem.start_date).isBefore(item.end_date) && moment(resourceItem.end_date).isAfter(item.start_date))
                    qualifies = false;
            }
            if (!qualifies)
                continue;
            this.items.push({
                ...item,
                resource_id: resource.id,
                temporary: true,
                color: 'rgb(162 155 178 / 62%)',
            });
        }
        const temporaryItem = this.items.filter(x => x.temporary);
        if (temporaryItem.length === 0) {
            this.noAvailableSlots = true;
        }
        this.generateTable();
        if (this.searchCtrl.value) {
            this.filterResources(this.searchCtrl.value);
        }
        // Scroll to event
        const differenceInPixel = moment(item.start_date).diff(this.startOfCalendar, 'days') * this.itemWidth;
        setTimeout(() => {
            this.table.nativeElement.scrollLeft = differenceInPixel;
        }, 50);
    }
    itemClick(item) {
        if (!item.temporary)
            return;
        this.items = this.items.filter(i => !i.temporary);
        this.items.find(i => i.id === item?.id).resource_id = item?.resource_id;
        console.log('i', item);
        this.generateTable();
        this.itemAssigned.emit(item);
    }
    generateTable() {
        if (this.searchCtrl.value) {
            this.filterResources(this.searchCtrl.value);
        }
        this.tableRows = [];
        for (const resource of this.filteredResources) {
            const cells = [];
            for (const field of this.resourceFields) {
                cells.push({
                    type: 'resource',
                    resource: resource,
                    text: resource[field],
                });
            }
            this.resourceWidth = 100 * this.resourceFields.length;
            this.tableRows.push({ resource: resource, items: cells });
        }
        this.itemHeaders = [];
        for (const i = this.startOfCalendar.clone(); i.isBefore(this.endOfCalendar); i.add(1, "day")) {
            this.itemHeaders.push({
                date: i.clone(),
                dayOfWeek: i.day(),
                currentDate: i.date(),
            });
        }
        for (const row of this.tableRows) {
            for (const header of this.itemHeaders) {
                const cell = {
                    type: 'item',
                    resource: row.resource,
                    header: header,
                    items: [],
                };
                row.items.push(cell);
                const items = this.items.filter(x => x.resource_id === row?.resource?.id && (header.date.isSame(x.start_date, 'day') || (header.date.isSame(this.startOfCalendar, 'day') && this.startOfCalendar.isAfter(x.start_date))));
                for (const item of items) {
                    const duration = moment.duration(item.end_date.diff(item.start_date));
                    const hours = duration.asHours();
                    let addPixels = 0;
                    if (moment(item.end_date).isAfter(this.endOfCalendar)) {
                        const offsetDuration = moment.duration(this.endOfCalendar.diff(item.end_date));
                        const offsetHours = offsetDuration.asHours();
                        addPixels = offsetHours / 24 * this.itemWidth;
                    }
                    let substract = 0;
                    if (this.startOfCalendar.isAfter(item.start_date)) {
                        const inHours = moment.duration(this.startOfCalendar.diff(item.start_date));
                        const diffHours = inHours.asHours();
                        substract = diffHours / 24 * this.itemWidth;
                    }
                    // @ts-ignore
                    cell.items.push({
                        ...item,
                        _width: ((hours / 24) * this.itemWidth) + addPixels - substract,
                        _left: substract ? this.itemLeft : this.itemWidth / 24 * moment(item.start_date).get("hours"),
                    });
                }
            }
        }
        this.unassignedItems = this.items.filter(x => x.resource_id == null).filter(x => x.text === "HOLD");
    }
    handleFormSearch() {
        this.searchCtrl.valueChanges
            .pipe(debounceTime(125), distinctUntilChanged())
            .subscribe(value => {
            this.filterResources(value);
            this.generateTable();
        });
    }
    // @ts-ignore
    filterResources(value) {
        if (value === null) {
            return true;
        }
        this.filteredResources = this.resources.filter(resource => {
            const { Category, Code, id, Number } = resource;
            const resourceInformation = (Category + Code + id + Number).toLowerCase();
            return resourceInformation.includes(value?.toLowerCase());
        });
    }
}
NgxTableSchedulerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.11", ngImport: i0, type: NgxTableSchedulerComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
NgxTableSchedulerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.3.11", type: NgxTableSchedulerComponent, selector: "ngx-table-scheduler", inputs: { startOfCalendar: "startOfCalendar", endOfCalendar: "endOfCalendar", currentDate: "currentDate", unassignedItems: "unassignedItems", defaultValue: "defaultValue", currentHours: "currentHours", resources: "resources", resourceFields: "resourceFields", items: "items", showSearchFilter: "showSearchFilter", itemWidth: "itemWidth", itemHeight: "itemHeight", filter: "filter", noAvailableSlots: "noAvailableSlots" }, outputs: { itemAssigned: "itemAssigned", itemDeleted: "itemDeleted" }, queries: [{ propertyName: "itemTemplateRef", first: true, predicate: ["itemTemplate"], descendants: true }, { propertyName: "itemContentTemplateRef", first: true, predicate: ["itemContentTemplate"], descendants: true }], viewQueries: [{ propertyName: "table", first: true, predicate: ["table"], descendants: true, read: ElementRef }], usesOnChanges: true, ngImport: i0, template: "<div class=\"table-outer\">\n  <div class=\"table-inner\" #table [ngStyle]=\"{'margin-left.px':resourceWidth}\">\n    <table>\n      <tr>\n        <th *ngFor=\"let field of resourceFields\" class=\"resource-header\">{{field}}</th>\n        <th *ngFor=\"let date of itemHeaders\" class=\"item-header\" [style.width.px]=\"itemWidth\"\n            [class.currentDay]=\"date.currentDate == currentDate.getDate()\"\n            [class.weekend]=\"date.dayOfWeek==0 || date.dayOfWeek==6\">\n          {{ date.date   | amDateFormat : ' MMM  d '}}\n        </th>\n      </tr>\n\n      <tr *ngFor=\"let row of tableRows\">\n        <td *ngFor=\"let cell of row.items\"\n            [class.resource-cell]=\"cell.type == 'resource'\"\n            [class.item-cell]=\"cell.type == 'item'\"\n            [class.weekend]=\"cell?.header?.dayOfWeek == 0 || cell?.header?.dayOfWeek == 6\"\n            [class.currentDay]=\"cell?.header?.currentDate == currentDate.getDate()\"\n            [style.width.px]=\"cell.type == 'item' && itemWidth \"\n            [style.height.px]=\"(cell.type ==='item' || cell.type === 'resource') && itemHeight\">\n          <span *ngIf=\"!cell.items || cell.items.length == 0\">{{cell.text}}</span>\n          <span>\n                          <ng-template #defaultItemTemplateContent let-item>\n                <div *ngIf=\"item.temporary\" class=\"check icon\"></div>\n                            {{item?.id == selectedItem?.id && row.resource?.id == selectedItem?.resource_id ? '' : item?.text }}\n              </ng-template>\n              <ng-template #defaultItemTemplate let-item let-i>\n                <div class=\"default-item\"\n                     (click)=\"itemClick(item)\"\n                     [class.selected-item]=\"item?.id == selectedItem?.id  && row.resource.id == selectedItem?.resource_id\"\n                     [ngStyle]=\"{ 'left.px': item._left, 'width.px': item._width, 'background-color': item?.color}\">\n                    <ng-container\n                      [ngTemplateOutlet]=\"itemContentTemplateRef || defaultItemTemplateContent\"\n                      [ngTemplateOutletContext]=\"{ $implicit: item, index: i}\">\n                   </ng-container>\n                </div>\n              </ng-template>\n              <ng-container\n                *ngFor=\"let item of cell.items;let i=index\"\n                [ngTemplateOutlet]=\"itemTemplateRef || defaultItemTemplate\"\n                [ngTemplateOutletContext]=\"{ $implicit: item, index: i}\">\n             </ng-container>\n         </span>\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div class=\"row\">\n    <div class=\"col text-right mr-2\">\n      {{this.startOfCalendar  | amDateFormat}}\n      <svg style=\"width:24px;height:24px\" viewBox=\"0 0 24 24\">\n        <path fill=\"currentColor\" d=\"M14 16.94V12.94H5.08L5.05 10.93H14V6.94L19 11.94Z\"/>\n      </svg>\n      {{this.endOfCalendar  | amDateFormat }}\n    </div>\n  </div>\n</div>\n\n<div class=\"no-car-exists\" *ngIf=\"filteredResources.length == 0\">\n  {{this.filteredResources.length == 0 ? \"No results found with this car resource\" : \"\"}}\n</div>\n", styles: [".table-outer{position:relative;border:1px solid #ccc}.table-outer .table-inner{overflow-x:scroll;overflow-y:visible;border-left:1px solid #ccc}.table-outer .table-inner table{table-layout:fixed;width:100%;border-collapse:collapse;border-spacing:0;border-radius:20px}.table-outer .table-inner table td,.table-outer .table-inner table th{border-top:unset;vertical-align:top;text-align:center;border-bottom:1px solid #ccc;padding:10px 0;border-left:1px solid #ccc}.table-outer .table-inner table td td:hover,.table-outer .table-inner table th td:hover{background-color:#ff0}.table-outer .table-inner table td:first-child,.table-outer .table-inner table th:first-child{border-left:0px!important}.table-outer .table-inner table .resource-cell,.table-outer .table-inner table .item-cell{height:45px;line-height:25px}.table-outer .table-inner table .resource-header,.table-outer .table-inner table .resource-cell{position:absolute;width:100px}.table-outer .table-inner table .resource-header,.table-outer .table-inner table .resource-cell,.table-outer .table-inner table .item-header{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.table-outer .table-inner table .resource-header:nth-child(1),.table-outer .table-inner table .resource-cell:nth-child(1){left:0}.table-outer .table-inner table .resource-header:nth-child(2),.table-outer .table-inner table .resource-cell:nth-child(2){left:100px}.table-outer .table-inner table .resource-header:nth-child(3),.table-outer .table-inner table .resource-cell:nth-child(3){left:200px}.table-outer .table-inner table .resource-header:nth-child(4),.table-outer .table-inner table .resource-cell:nth-child(4){left:300px}.table-outer .table-inner table .item-cell,.table-outer .table-inner table .item-header{width:50px;position:relative}.table-outer .table-inner table .item-cell .event{position:absolute;left:0;height:20px;z-index:999;top:calc(50% - 10px)}.reserved-resource{width:117px;left:25%;background-color:#00f}.weekend{background-color:#ffe1064a}.currentDay{background-color:#b2fad4}.paragraph-style{color:#fff}.check.icon{color:#fff;position:absolute;margin-left:3px;margin-top:4px;width:14px;height:8px;border-bottom:solid 2px currentColor;border-left:solid 2px currentColor;transform:rotate(-45deg)}.float-container{display:flex;margin-bottom:10px}.flex-container{border-collapse:collapse;width:25%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;gap:3px}.unassigned-item{flex:3 0;overflow:auto}.size-item-list{background-color:#b0e0e6;transition:background-color .5s;border:1px solid rgba(0,0,0,.125);border-radius:8px;padding:10px;text-overflow:ellipsis;min-width:305px;float:left;font-size:12px;position:relative;display:block}.size-item-list:hover{background-color:#66f115ab}.form-control:focus{border-color:#68efdbcc;box-shadow:0 1px 1px #00000013 inset,0 0 8px #68dbef99;outline:0 none}.input-search{width:50%;box-sizing:border-box;border:2px solid #ccc;border-radius:8px;background-image:url(/assets/img/icons8-search-30.png);background-position:7px 7px;background-repeat:no-repeat;font-size:16px;background-color:#fff;padding:12px 20px 12px 40px;transition:width .5s ease-in-out}.input-search:focus{width:100%;border-color:#59aff6cc;box-shadow:0 1px 1px #00000013 inset,0 0 8px #68efeb99;outline:0 none}.search-icon{width:31px;height:47px}.search-input{flex:1 0}.no-car-exists{background:#c7c5c5;padding:10px;border-radius:10px;text-align:center;margin-top:30px}.list-style{flex-direction:row;gap:7px;display:flex;padding-left:0;margin-bottom:0}.assign-button{color:#fff;background-color:#0069d9;border-color:#0062cc;margin-left:3px;border-radius:5px;box-shadow:0 8px 16px #0003,0 6px 20px #00000030}.delete-icon{width:24px;height:20px;float:right;cursor:pointer}.delete-icon:hover{transition-timing-function:ease-out;transition:.25s;transform:translateY(-5px)}table .item-cell ::ng-deep .default-item{position:absolute;left:0;height:20px;z-index:999;top:calc(50% - 10px)}.text-right{text-align:right}\n"], directives: [{ type: i1.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }], pipes: { "amDateFormat": i2.DateFormatPipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.11", ngImport: i0, type: NgxTableSchedulerComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ngx-table-scheduler', template: "<div class=\"table-outer\">\n  <div class=\"table-inner\" #table [ngStyle]=\"{'margin-left.px':resourceWidth}\">\n    <table>\n      <tr>\n        <th *ngFor=\"let field of resourceFields\" class=\"resource-header\">{{field}}</th>\n        <th *ngFor=\"let date of itemHeaders\" class=\"item-header\" [style.width.px]=\"itemWidth\"\n            [class.currentDay]=\"date.currentDate == currentDate.getDate()\"\n            [class.weekend]=\"date.dayOfWeek==0 || date.dayOfWeek==6\">\n          {{ date.date   | amDateFormat : ' MMM  d '}}\n        </th>\n      </tr>\n\n      <tr *ngFor=\"let row of tableRows\">\n        <td *ngFor=\"let cell of row.items\"\n            [class.resource-cell]=\"cell.type == 'resource'\"\n            [class.item-cell]=\"cell.type == 'item'\"\n            [class.weekend]=\"cell?.header?.dayOfWeek == 0 || cell?.header?.dayOfWeek == 6\"\n            [class.currentDay]=\"cell?.header?.currentDate == currentDate.getDate()\"\n            [style.width.px]=\"cell.type == 'item' && itemWidth \"\n            [style.height.px]=\"(cell.type ==='item' || cell.type === 'resource') && itemHeight\">\n          <span *ngIf=\"!cell.items || cell.items.length == 0\">{{cell.text}}</span>\n          <span>\n                          <ng-template #defaultItemTemplateContent let-item>\n                <div *ngIf=\"item.temporary\" class=\"check icon\"></div>\n                            {{item?.id == selectedItem?.id && row.resource?.id == selectedItem?.resource_id ? '' : item?.text }}\n              </ng-template>\n              <ng-template #defaultItemTemplate let-item let-i>\n                <div class=\"default-item\"\n                     (click)=\"itemClick(item)\"\n                     [class.selected-item]=\"item?.id == selectedItem?.id  && row.resource.id == selectedItem?.resource_id\"\n                     [ngStyle]=\"{ 'left.px': item._left, 'width.px': item._width, 'background-color': item?.color}\">\n                    <ng-container\n                      [ngTemplateOutlet]=\"itemContentTemplateRef || defaultItemTemplateContent\"\n                      [ngTemplateOutletContext]=\"{ $implicit: item, index: i}\">\n                   </ng-container>\n                </div>\n              </ng-template>\n              <ng-container\n                *ngFor=\"let item of cell.items;let i=index\"\n                [ngTemplateOutlet]=\"itemTemplateRef || defaultItemTemplate\"\n                [ngTemplateOutletContext]=\"{ $implicit: item, index: i}\">\n             </ng-container>\n         </span>\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div class=\"row\">\n    <div class=\"col text-right mr-2\">\n      {{this.startOfCalendar  | amDateFormat}}\n      <svg style=\"width:24px;height:24px\" viewBox=\"0 0 24 24\">\n        <path fill=\"currentColor\" d=\"M14 16.94V12.94H5.08L5.05 10.93H14V6.94L19 11.94Z\"/>\n      </svg>\n      {{this.endOfCalendar  | amDateFormat }}\n    </div>\n  </div>\n</div>\n\n<div class=\"no-car-exists\" *ngIf=\"filteredResources.length == 0\">\n  {{this.filteredResources.length == 0 ? \"No results found with this car resource\" : \"\"}}\n</div>\n", styles: [".table-outer{position:relative;border:1px solid #ccc}.table-outer .table-inner{overflow-x:scroll;overflow-y:visible;border-left:1px solid #ccc}.table-outer .table-inner table{table-layout:fixed;width:100%;border-collapse:collapse;border-spacing:0;border-radius:20px}.table-outer .table-inner table td,.table-outer .table-inner table th{border-top:unset;vertical-align:top;text-align:center;border-bottom:1px solid #ccc;padding:10px 0;border-left:1px solid #ccc}.table-outer .table-inner table td td:hover,.table-outer .table-inner table th td:hover{background-color:#ff0}.table-outer .table-inner table td:first-child,.table-outer .table-inner table th:first-child{border-left:0px!important}.table-outer .table-inner table .resource-cell,.table-outer .table-inner table .item-cell{height:45px;line-height:25px}.table-outer .table-inner table .resource-header,.table-outer .table-inner table .resource-cell{position:absolute;width:100px}.table-outer .table-inner table .resource-header,.table-outer .table-inner table .resource-cell,.table-outer .table-inner table .item-header{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.table-outer .table-inner table .resource-header:nth-child(1),.table-outer .table-inner table .resource-cell:nth-child(1){left:0}.table-outer .table-inner table .resource-header:nth-child(2),.table-outer .table-inner table .resource-cell:nth-child(2){left:100px}.table-outer .table-inner table .resource-header:nth-child(3),.table-outer .table-inner table .resource-cell:nth-child(3){left:200px}.table-outer .table-inner table .resource-header:nth-child(4),.table-outer .table-inner table .resource-cell:nth-child(4){left:300px}.table-outer .table-inner table .item-cell,.table-outer .table-inner table .item-header{width:50px;position:relative}.table-outer .table-inner table .item-cell .event{position:absolute;left:0;height:20px;z-index:999;top:calc(50% - 10px)}.reserved-resource{width:117px;left:25%;background-color:#00f}.weekend{background-color:#ffe1064a}.currentDay{background-color:#b2fad4}.paragraph-style{color:#fff}.check.icon{color:#fff;position:absolute;margin-left:3px;margin-top:4px;width:14px;height:8px;border-bottom:solid 2px currentColor;border-left:solid 2px currentColor;transform:rotate(-45deg)}.float-container{display:flex;margin-bottom:10px}.flex-container{border-collapse:collapse;width:25%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;gap:3px}.unassigned-item{flex:3 0;overflow:auto}.size-item-list{background-color:#b0e0e6;transition:background-color .5s;border:1px solid rgba(0,0,0,.125);border-radius:8px;padding:10px;text-overflow:ellipsis;min-width:305px;float:left;font-size:12px;position:relative;display:block}.size-item-list:hover{background-color:#66f115ab}.form-control:focus{border-color:#68efdbcc;box-shadow:0 1px 1px #00000013 inset,0 0 8px #68dbef99;outline:0 none}.input-search{width:50%;box-sizing:border-box;border:2px solid #ccc;border-radius:8px;background-image:url(/assets/img/icons8-search-30.png);background-position:7px 7px;background-repeat:no-repeat;font-size:16px;background-color:#fff;padding:12px 20px 12px 40px;transition:width .5s ease-in-out}.input-search:focus{width:100%;border-color:#59aff6cc;box-shadow:0 1px 1px #00000013 inset,0 0 8px #68efeb99;outline:0 none}.search-icon{width:31px;height:47px}.search-input{flex:1 0}.no-car-exists{background:#c7c5c5;padding:10px;border-radius:10px;text-align:center;margin-top:30px}.list-style{flex-direction:row;gap:7px;display:flex;padding-left:0;margin-bottom:0}.assign-button{color:#fff;background-color:#0069d9;border-color:#0062cc;margin-left:3px;border-radius:5px;box-shadow:0 8px 16px #0003,0 6px 20px #00000030}.delete-icon{width:24px;height:20px;float:right;cursor:pointer}.delete-icon:hover{transition-timing-function:ease-out;transition:.25s;transform:translateY(-5px)}table .item-cell ::ng-deep .default-item{position:absolute;left:0;height:20px;z-index:999;top:calc(50% - 10px)}.text-right{text-align:right}\n"] }]
        }], ctorParameters: function () { return []; }, propDecorators: { startOfCalendar: [{
                type: Input
            }], endOfCalendar: [{
                type: Input
            }], currentDate: [{
                type: Input
            }], unassignedItems: [{
                type: Input
            }], defaultValue: [{
                type: Input
            }], currentHours: [{
                type: Input
            }], resources: [{
                type: Input
            }], resourceFields: [{
                type: Input
            }], items: [{
                type: Input
            }], showSearchFilter: [{
                type: Input
            }], itemWidth: [{
                type: Input
            }], itemHeight: [{
                type: Input
            }], table: [{
                type: ViewChild,
                args: ['table', { read: ElementRef }]
            }], filter: [{
                type: Input
            }], itemTemplateRef: [{
                type: ContentChild,
                args: ["itemTemplate", { static: false }]
            }], itemContentTemplateRef: [{
                type: ContentChild,
                args: ["itemContentTemplate", { static: false }]
            }], itemAssigned: [{
                type: Output
            }], itemDeleted: [{
                type: Output
            }], noAvailableSlots: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXRhYmxlLXNjaGVkdWxlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtY2FsZW5kYXItc2NoZWR1bGVyL3NyYy9saWIvbmd4LXRhYmxlLXNjaGVkdWxlci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtY2FsZW5kYXItc2NoZWR1bGVyL3NyYy9saWIvbmd4LXRhYmxlLXNjaGVkdWxlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUNULEtBQUssRUFFTCxNQUFNLEVBQ04sWUFBWSxFQUNaLFNBQVMsRUFDVCxVQUFVLEVBRVYsWUFBWSxFQUViLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sTUFBTSxNQUFNLFFBQVEsQ0FBQztBQUM1QixPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDM0MsT0FBTyxFQUFDLFlBQVksRUFBRSxvQkFBb0IsRUFBQyxNQUFNLGdCQUFnQixDQUFDOzs7O0FBb0JsRSxNQUFNLE9BQU8sMEJBQTBCO0lBMENyQztRQW5DUyxjQUFTLEdBQVUsRUFBRSxDQUFDO1FBQ3RCLG1CQUFjLEdBQVUsRUFBRSxDQUFDO1FBQzNCLFVBQUssR0FBVSxFQUFFLENBQUM7UUFDbEIscUJBQWdCLEdBQVksS0FBSyxDQUFDO1FBaUJqQyxpQkFBWSxHQUFzQixJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ3JELGdCQUFXLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUE7UUFFN0QsYUFBUSxHQUFHLENBQUMsQ0FBQztRQUNiLGNBQVMsR0FBVSxFQUFFLENBQUM7UUFDdEIsZ0JBQVcsR0FBVSxFQUFFLENBQUM7UUFFeEIsc0JBQWlCLEdBQVEsRUFBRSxDQUFDO1FBQzVCLGVBQVUsR0FBRyxJQUFJLFdBQVcsRUFBRSxDQUFDO1FBRS9CLGlCQUFZLEdBQVEsSUFBSSxDQUFDO0lB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LFxuICBPbkluaXQsXG4gIE91dHB1dCxcbiAgRXZlbnRFbWl0dGVyLFxuICBWaWV3Q2hpbGQsXG4gIEVsZW1lbnRSZWYsXG4gIFNpbXBsZUNoYW5nZXMsXG4gIENvbnRlbnRDaGlsZCxcbiAgVGVtcGxhdGVSZWZcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQge0Zvcm1Db250cm9sfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQge2RlYm91bmNlVGltZSwgZGlzdGluY3RVbnRpbENoYW5nZWR9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW50ZXJmYWNlIFJvdyB7XG4gIHJlc291cmNlOiBhbnk7XG4gIGl0ZW1zOiBDZWxsW10gfCBhbnk7XG59XG5cbmludGVyZmFjZSBDZWxsIHtcbiAgdHlwZTogJ2l0ZW0nIHwgJ3Jlc291cmNlJztcbiAgcmVzb3VyY2U/OiBhbnlbXVxuICBoZWFkZXI/OiBhbnk7XG4gIGl0ZW1zPzogYW55W107XG4gIHRleHQ/OiBzdHJpbmc7XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25neC10YWJsZS1zY2hlZHVsZXInLFxuICB0ZW1wbGF0ZVVybDogJ25neC10YWJsZS1zY2hlZHVsZXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnbmd4LXRhYmxlLXNjaGVkdWxlci5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIE5neFRhYmxlU2NoZWR1bGVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgc3RhcnRPZkNhbGVuZGFyOiBhbnk7XG4gIEBJbnB1dCgpIGVuZE9mQ2FsZW5kYXI6IGFueTtcbiAgQElucHV0KCkgY3VycmVudERhdGU6IGFueTtcbiAgQElucHV0KCkgdW5hc3NpZ25lZEl0ZW1zOiBhbnk7XG4gIEBJbnB1dCgpIGRlZmF1bHRWYWx1ZTogYW55O1xuICBASW5wdXQoKSBjdXJyZW50SG91cnM6IGFueTtcbiAgQElucHV0KCkgcmVzb3VyY2VzOiBhbnlbXSA9IFtdO1xuICBASW5wdXQoKSByZXNvdXJjZUZpZWxkczogYW55W10gPSBbXTtcbiAgQElucHV0KCkgaXRlbXM6IGFueVtdID0gW107XG4gIEBJbnB1dCgpIHNob3dTZWFyY2hGaWx0ZXI6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgaXRlbVdpZHRoOiBhbnk7XG4gIEBJbnB1dCgpIGl0ZW1IZWlnaHQ6IGFueVxuXG4gIEBWaWV3Q2hpbGQoJ3RhYmxlJywge3JlYWQ6IEVsZW1lbnRSZWZ9KSBwdWJsaWMgdGFibGU6IEVsZW1lbnRSZWY8YW55PiB8IGFueTtcblxuICBASW5wdXQoKSBzZXQgZmlsdGVyKGZpbHRlcjogc3RyaW5nKSB7XG4gICAgdGhpcy5zZWFyY2hDdHJsLnNldFZhbHVlKGZpbHRlcik7XG4gICAgaWYgKHRoaXMudGFibGVSb3dzKSB7XG4gICAgICB0aGlzLmZpbHRlclJlc291cmNlcyhmaWx0ZXIpO1xuICAgICAgdGhpcy5nZW5lcmF0ZVRhYmxlKCk7XG4gICAgfVxuICB9XG5cbiAgQENvbnRlbnRDaGlsZChcIml0ZW1UZW1wbGF0ZVwiLCB7c3RhdGljOiBmYWxzZX0pIGl0ZW1UZW1wbGF0ZVJlZjogVGVtcGxhdGVSZWY8YW55PiB8IGFueTtcbiAgQENvbnRlbnRDaGlsZChcIml0ZW1Db250ZW50VGVtcGxhdGVcIiwge3N0YXRpYzogZmFsc2V9KSBpdGVtQ29udGVudFRlbXBsYXRlUmVmOiBUZW1wbGF0ZVJlZjxhbnk+IHwgYW55O1xuXG4gIEBPdXRwdXQoKSBpdGVtQXNzaWduZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgaXRlbURlbGV0ZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpXG5cbiAgaXRlbUxlZnQgPSAwO1xuICB0YWJsZVJvd3M6IFJvd1tdID0gW107XG4gIGl0ZW1IZWFkZXJzOiBhbnlbXSA9IFtdO1xuXG4gIGZpbHRlcmVkUmVzb3VyY2VzOiBhbnkgPSBbXTtcbiAgc2VhcmNoQ3RybCA9IG5ldyBGb3JtQ29udHJvbCgpO1xuXG4gIHNlbGVjdGVkSXRlbTogYW55ID0gbnVsbDtcbiAgcmVzb3VyY2VXaWR0aDogYW55O1xuICBASW5wdXQoKSBub0F2YWlsYWJsZVNsb3RzOiBhbnk7XG5cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICB9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5oYW5kbGVGb3JtU2VhcmNoKCk7XG4gICAgdGhpcy5maWx0ZXJlZFJlc291cmNlcyA9IHRoaXMucmVzb3VyY2VzXG4gICAgdGhpcy5nZW5lcmF0ZVRhYmxlKCk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2cobW9tZW50KCkudG9JU09TdHJpbmcoKSk7XG5cblxuICAgIGxldCBzaG91bGRHZW5lcmF0ZSA9IGZhbHNlO1xuICAgIGlmIChjaGFuZ2VzWydzdGFydE9mQ2FsZW5kYXInXSAmJiAhKHRoaXMuc3RhcnRPZkNhbGVuZGFyIGluc3RhbmNlb2YgbW9tZW50KSkge1xuICAgICAgdGhpcy5zdGFydE9mQ2FsZW5kYXIgPSBtb21lbnQodGhpcy5zdGFydE9mQ2FsZW5kYXIpO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlc1snZW5kT2ZDYWxlbmRhciddICYmICEodGhpcy5lbmRPZkNhbGVuZGFyIGluc3RhbmNlb2YgbW9tZW50KSkge1xuICAgICAgdGhpcy5lbmRPZkNhbGVuZGFyID0gbW9tZW50KHRoaXMuZW5kT2ZDYWxlbmRhcik7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzWydpdGVtcyddKSB7XG4gICAgICBzaG91bGRHZW5lcmF0ZSA9IHRydWU7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzWydyZXNvdXJjZXMnXSkge1xuICAgICAgdGhpcy5maWx0ZXJlZFJlc291cmNlcyA9IHRoaXMucmVzb3VyY2VzO1xuICAgICAgc2hvdWxkR2VuZXJhdGUgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChzaG91bGRHZW5lcmF0ZSlcbiAgICAgIHRoaXMuZ2VuZXJhdGVUYWJsZSgpO1xuICB9XG5cbiAgcHJlcGFyZUFzc2lnbkl0ZW0oaXRlbTogYW55KSB7XG4gICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMuZmlsdGVyKGkgPT4gIWkudGVtcG9yYXJ5KTtcbiAgICB0aGlzLm5vQXZhaWxhYmxlU2xvdHMgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbT8uaWQgPT09IGl0ZW0uaWQpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gbnVsbDtcbiAgICAgIHRoaXMuZ2VuZXJhdGVUYWJsZSgpXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gaXRlbTtcbiAgICBmb3IgKGNvbnN0IHJlc291cmNlIG9mIHRoaXMucmVzb3VyY2VzKSB7XG4gICAgICBjb25zdCByZXNvdXJjZUl0ZW1zID0gdGhpcy5pdGVtcy5maWx0ZXIoeCA9PiB4LnJlc291cmNlX2lkID09PSByZXNvdXJjZS5pZClcbiAgICAgIGxldCBxdWFsaWZpZXMgPSB0cnVlO1xuXG4gICAgICBmb3IgKGNvbnN0IHJlc291cmNlSXRlbSBvZiByZXNvdXJjZUl0ZW1zKSB7XG4gICAgICAgIGlmIChtb21lbnQocmVzb3VyY2VJdGVtLnN0YXJ0X2RhdGUpLmlzQmVmb3JlKGl0ZW0uZW5kX2RhdGUpICYmIG1vbWVudChyZXNvdXJjZUl0ZW0uZW5kX2RhdGUpLmlzQWZ0ZXIoaXRlbS5zdGFydF9kYXRlKSlcbiAgICAgICAgICBxdWFsaWZpZXMgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFxdWFsaWZpZXMpXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgdGhpcy5pdGVtcy5wdXNoKHtcbiAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgcmVzb3VyY2VfaWQ6IHJlc291cmNlLmlkLFxuICAgICAgICB0ZW1wb3Jhcnk6IHRydWUsXG4gICAgICAgIGNvbG9yOiAncmdiKDE2MiAxNTUgMTc4IC8gNjIlKScsXG5cbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IHRlbXBvcmFyeUl0ZW0gPSB0aGlzLml0ZW1zLmZpbHRlcih4ID0+IHgudGVtcG9yYXJ5KVxuXG4gICAgaWYgKHRlbXBvcmFyeUl0ZW0ubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLm5vQXZhaWxhYmxlU2xvdHMgPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuZ2VuZXJhdGVUYWJsZSgpO1xuICAgIGlmICh0aGlzLnNlYXJjaEN0cmwudmFsdWUpIHtcbiAgICAgIHRoaXMuZmlsdGVyUmVzb3VyY2VzKHRoaXMuc2VhcmNoQ3RybC52YWx1ZSk7XG4gICAgfVxuICAgIC8vIFNjcm9sbCB0byBldmVudFxuICAgIGNvbnN0IGRpZmZlcmVuY2VJblBpeGVsID0gbW9tZW50KGl0ZW0uc3RhcnRfZGF0ZSkuZGlmZih0aGlzLnN0YXJ0T2ZDYWxlbmRhciwgJ2RheXMnKSAqIHRoaXMuaXRlbVdpZHRoO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50YWJsZS5uYXRpdmVFbGVtZW50LnNjcm9sbExlZnQgPSBkaWZmZXJlbmNlSW5QaXhlbDtcbiAgICB9LCA1MCk7XG4gIH1cblxuICBpdGVtQ2xpY2soaXRlbTogYW55KSB7XG4gICAgaWYgKCFpdGVtLnRlbXBvcmFyeSlcbiAgICAgIHJldHVybjtcbiAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5maWx0ZXIoaSA9PiAhaS50ZW1wb3JhcnkpO1xuICAgIHRoaXMuaXRlbXMuZmluZChpID0+IGkuaWQgPT09IGl0ZW0/LmlkKS5yZXNvdXJjZV9pZCA9IGl0ZW0/LnJlc291cmNlX2lkO1xuICAgIGNvbnNvbGUubG9nKCdpJywgaXRlbSlcblxuICAgIHRoaXMuZ2VuZXJhdGVUYWJsZSgpO1xuICAgIHRoaXMuaXRlbUFzc2lnbmVkLmVtaXQoaXRlbSk7XG4gIH1cblxuICBwdWJsaWMgZ2VuZXJhdGVUYWJsZSgpIHtcbiAgICBpZiAodGhpcy5zZWFyY2hDdHJsLnZhbHVlKSB7XG4gICAgICB0aGlzLmZpbHRlclJlc291cmNlcyh0aGlzLnNlYXJjaEN0cmwudmFsdWUpO1xuICAgIH1cblxuICAgIHRoaXMudGFibGVSb3dzID0gW107XG4gICAgZm9yIChjb25zdCByZXNvdXJjZSBvZiB0aGlzLmZpbHRlcmVkUmVzb3VyY2VzKSB7XG4gICAgICBjb25zdCBjZWxsczogQ2VsbFtdID0gW107XG4gICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIHRoaXMucmVzb3VyY2VGaWVsZHMpIHtcbiAgICAgICAgY2VsbHMucHVzaChcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiAncmVzb3VyY2UnLFxuICAgICAgICAgICAgcmVzb3VyY2U6IHJlc291cmNlLFxuICAgICAgICAgICAgdGV4dDogcmVzb3VyY2VbZmllbGRdLFxuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5yZXNvdXJjZVdpZHRoID0gMTAwICogdGhpcy5yZXNvdXJjZUZpZWxkcy5sZW5ndGg7XG4gICAgICB0aGlzLnRhYmxlUm93cy5wdXNoKHtyZXNvdXJjZTogcmVzb3VyY2UsIGl0ZW1zOiBjZWxsc30pO1xuICAgIH1cblxuICAgIHRoaXMuaXRlbUhlYWRlcnMgPSBbXTtcblxuICAgIGZvciAoY29uc3QgaSA9IHRoaXMuc3RhcnRPZkNhbGVuZGFyLmNsb25lKCk7IGkuaXNCZWZvcmUodGhpcy5lbmRPZkNhbGVuZGFyKTsgaS5hZGQoMSwgXCJkYXlcIikpIHtcbiAgICAgIHRoaXMuaXRlbUhlYWRlcnMucHVzaCh7XG4gICAgICAgIGRhdGU6IGkuY2xvbmUoKSxcbiAgICAgICAgZGF5T2ZXZWVrOiBpLmRheSgpLFxuICAgICAgICBjdXJyZW50RGF0ZTogaS5kYXRlKCksXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHJvdyBvZiB0aGlzLnRhYmxlUm93cykge1xuICAgICAgZm9yIChjb25zdCBoZWFkZXIgb2YgdGhpcy5pdGVtSGVhZGVycykge1xuICAgICAgICBjb25zdCBjZWxsOiBDZWxsID0ge1xuICAgICAgICAgIHR5cGU6ICdpdGVtJyxcbiAgICAgICAgICByZXNvdXJjZTogcm93LnJlc291cmNlLFxuICAgICAgICAgIGhlYWRlcjogaGVhZGVyLFxuICAgICAgICAgIGl0ZW1zOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgcm93Lml0ZW1zLnB1c2goY2VsbCk7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5pdGVtcy5maWx0ZXIoeCA9PiB4LnJlc291cmNlX2lkID09PSByb3c/LnJlc291cmNlPy5pZCAmJiAoaGVhZGVyLmRhdGUuaXNTYW1lKHguc3RhcnRfZGF0ZSwgJ2RheScpIHx8IChoZWFkZXIuZGF0ZS5pc1NhbWUodGhpcy5zdGFydE9mQ2FsZW5kYXIsICdkYXknKSAmJiB0aGlzLnN0YXJ0T2ZDYWxlbmRhci5pc0FmdGVyKHguc3RhcnRfZGF0ZSkpKSlcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBtb21lbnQuZHVyYXRpb24oaXRlbS5lbmRfZGF0ZS5kaWZmKGl0ZW0uc3RhcnRfZGF0ZSkpO1xuICAgICAgICAgIGNvbnN0IGhvdXJzID0gZHVyYXRpb24uYXNIb3VycygpO1xuXG4gICAgICAgICAgbGV0IGFkZFBpeGVscyA9IDA7XG4gICAgICAgICAgaWYgKG1vbWVudChpdGVtLmVuZF9kYXRlKS5pc0FmdGVyKHRoaXMuZW5kT2ZDYWxlbmRhcikpIHtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldER1cmF0aW9uID0gbW9tZW50LmR1cmF0aW9uKHRoaXMuZW5kT2ZDYWxlbmRhci5kaWZmKGl0ZW0uZW5kX2RhdGUpKTtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldEhvdXJzID0gb2Zmc2V0RHVyYXRpb24uYXNIb3VycygpO1xuICAgICAgICAgICAgYWRkUGl4ZWxzID0gb2Zmc2V0SG91cnMgLyAyNCAqIHRoaXMuaXRlbVdpZHRoO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCBzdWJzdHJhY3QgPSAwO1xuICAgICAgICAgIGlmICh0aGlzLnN0YXJ0T2ZDYWxlbmRhci5pc0FmdGVyKGl0ZW0uc3RhcnRfZGF0ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGluSG91cnMgPSBtb21lbnQuZHVyYXRpb24odGhpcy5zdGFydE9mQ2FsZW5kYXIuZGlmZihpdGVtLnN0YXJ0X2RhdGUpKVxuICAgICAgICAgICAgY29uc3QgZGlmZkhvdXJzID0gaW5Ib3Vycy5hc0hvdXJzKCk7XG4gICAgICAgICAgICBzdWJzdHJhY3QgPSBkaWZmSG91cnMgLyAyNCAqIHRoaXMuaXRlbVdpZHRoO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICBjZWxsLml0ZW1zLnB1c2goe1xuICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgIF93aWR0aDogKChob3VycyAvIDI0KSAqIHRoaXMuaXRlbVdpZHRoKSArIGFkZFBpeGVscyAtIHN1YnN0cmFjdCxcbiAgICAgICAgICAgIF9sZWZ0OiBzdWJzdHJhY3QgPyB0aGlzLml0ZW1MZWZ0IDogdGhpcy5pdGVtV2lkdGggLyAyNCAqIG1vbWVudChpdGVtLnN0YXJ0X2RhdGUpLmdldChcImhvdXJzXCIpLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy51bmFzc2lnbmVkSXRlbXMgPSB0aGlzLml0ZW1zLmZpbHRlcih4ID0+IHgucmVzb3VyY2VfaWQgPT0gbnVsbCkuZmlsdGVyKHggPT4geC50ZXh0ID09PSBcIkhPTERcIilcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlRm9ybVNlYXJjaCgpIHtcbiAgICB0aGlzLnNlYXJjaEN0cmwudmFsdWVDaGFuZ2VzXG4gICAgICAucGlwZShcbiAgICAgICAgZGVib3VuY2VUaW1lKDEyNSksXG4gICAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCksXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKHZhbHVlID0+IHtcbiAgICAgICAgdGhpcy5maWx0ZXJSZXNvdXJjZXModmFsdWUpXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVUYWJsZSgpO1xuICAgICAgfSk7XG4gIH1cblxuICAvLyBAdHMtaWdub3JlXG4gIHByaXZhdGUgZmlsdGVyUmVzb3VyY2VzKHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aGlzLmZpbHRlcmVkUmVzb3VyY2VzID0gdGhpcy5yZXNvdXJjZXMuZmlsdGVyKHJlc291cmNlID0+IHtcbiAgICAgIGNvbnN0IHtDYXRlZ29yeSwgQ29kZSwgaWQsIE51bWJlcn0gPSByZXNvdXJjZVxuICAgICAgY29uc3QgcmVzb3VyY2VJbmZvcm1hdGlvbiA9IChDYXRlZ29yeSArIENvZGUgKyBpZCArIE51bWJlcikudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiByZXNvdXJjZUluZm9ybWF0aW9uLmluY2x1ZGVzKHZhbHVlPy50b0xvd2VyQ2FzZSgpKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiPGRpdiBjbGFzcz1cInRhYmxlLW91dGVyXCI+XG4gIDxkaXYgY2xhc3M9XCJ0YWJsZS1pbm5lclwiICN0YWJsZSBbbmdTdHlsZV09XCJ7J21hcmdpbi1sZWZ0LnB4JzpyZXNvdXJjZVdpZHRofVwiPlxuICAgIDx0YWJsZT5cbiAgICAgIDx0cj5cbiAgICAgICAgPHRoICpuZ0Zvcj1cImxldCBmaWVsZCBvZiByZXNvdXJjZUZpZWxkc1wiIGNsYXNzPVwicmVzb3VyY2UtaGVhZGVyXCI+e3tmaWVsZH19PC90aD5cbiAgICAgICAgPHRoICpuZ0Zvcj1cImxldCBkYXRlIG9mIGl0ZW1IZWFkZXJzXCIgY2xhc3M9XCJpdGVtLWhlYWRlclwiIFtzdHlsZS53aWR0aC5weF09XCJpdGVtV2lkdGhcIlxuICAgICAgICAgICAgW2NsYXNzLmN1cnJlbnREYXldPVwiZGF0ZS5jdXJyZW50RGF0ZSA9PSBjdXJyZW50RGF0ZS5nZXREYXRlKClcIlxuICAgICAgICAgICAgW2NsYXNzLndlZWtlbmRdPVwiZGF0ZS5kYXlPZldlZWs9PTAgfHwgZGF0ZS5kYXlPZldlZWs9PTZcIj5cbiAgICAgICAgICB7eyBkYXRlLmRhdGUgICB8IGFtRGF0ZUZvcm1hdCA6ICcgTU1NICBkICd9fVxuICAgICAgICA8L3RoPlxuICAgICAgPC90cj5cblxuICAgICAgPHRyICpuZ0Zvcj1cImxldCByb3cgb2YgdGFibGVSb3dzXCI+XG4gICAgICAgIDx0ZCAqbmdGb3I9XCJsZXQgY2VsbCBvZiByb3cuaXRlbXNcIlxuICAgICAgICAgICAgW2NsYXNzLnJlc291cmNlLWNlbGxdPVwiY2VsbC50eXBlID09ICdyZXNvdXJjZSdcIlxuICAgICAgICAgICAgW2NsYXNzLml0ZW0tY2VsbF09XCJjZWxsLnR5cGUgPT0gJ2l0ZW0nXCJcbiAgICAgICAgICAgIFtjbGFzcy53ZWVrZW5kXT1cImNlbGw/LmhlYWRlcj8uZGF5T2ZXZWVrID09IDAgfHwgY2VsbD8uaGVhZGVyPy5kYXlPZldlZWsgPT0gNlwiXG4gICAgICAgICAgICBbY2xhc3MuY3VycmVudERheV09XCJjZWxsPy5oZWFkZXI/LmN1cnJlbnREYXRlID09IGN1cnJlbnREYXRlLmdldERhdGUoKVwiXG4gICAgICAgICAgICBbc3R5bGUud2lkdGgucHhdPVwiY2VsbC50eXBlID09ICdpdGVtJyAmJiBpdGVtV2lkdGggXCJcbiAgICAgICAgICAgIFtzdHlsZS5oZWlnaHQucHhdPVwiKGNlbGwudHlwZSA9PT0naXRlbScgfHwgY2VsbC50eXBlID09PSAncmVzb3VyY2UnKSAmJiBpdGVtSGVpZ2h0XCI+XG4gICAgICAgICAgPHNwYW4gKm5nSWY9XCIhY2VsbC5pdGVtcyB8fCBjZWxsLml0ZW1zLmxlbmd0aCA9PSAwXCI+e3tjZWxsLnRleHR9fTwvc3Bhbj5cbiAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNkZWZhdWx0SXRlbVRlbXBsYXRlQ29udGVudCBsZXQtaXRlbT5cbiAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiaXRlbS50ZW1wb3JhcnlcIiBjbGFzcz1cImNoZWNrIGljb25cIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7e2l0ZW0/LmlkID09IHNlbGVjdGVkSXRlbT8uaWQgJiYgcm93LnJlc291cmNlPy5pZCA9PSBzZWxlY3RlZEl0ZW0/LnJlc291cmNlX2lkID8gJycgOiBpdGVtPy50ZXh0IH19XG4gICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjZGVmYXVsdEl0ZW1UZW1wbGF0ZSBsZXQtaXRlbSBsZXQtaT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC1pdGVtXCJcbiAgICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJpdGVtQ2xpY2soaXRlbSlcIlxuICAgICAgICAgICAgICAgICAgICAgW2NsYXNzLnNlbGVjdGVkLWl0ZW1dPVwiaXRlbT8uaWQgPT0gc2VsZWN0ZWRJdGVtPy5pZCAgJiYgcm93LnJlc291cmNlLmlkID09IHNlbGVjdGVkSXRlbT8ucmVzb3VyY2VfaWRcIlxuICAgICAgICAgICAgICAgICAgICAgW25nU3R5bGVdPVwieyAnbGVmdC5weCc6IGl0ZW0uX2xlZnQsICd3aWR0aC5weCc6IGl0ZW0uX3dpZHRoLCAnYmFja2dyb3VuZC1jb2xvcic6IGl0ZW0/LmNvbG9yfVwiPlxuICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwiaXRlbUNvbnRlbnRUZW1wbGF0ZVJlZiB8fCBkZWZhdWx0SXRlbVRlbXBsYXRlQ29udGVudFwiXG4gICAgICAgICAgICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgJGltcGxpY2l0OiBpdGVtLCBpbmRleDogaX1cIj5cbiAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAgICpuZ0Zvcj1cImxldCBpdGVtIG9mIGNlbGwuaXRlbXM7bGV0IGk9aW5kZXhcIlxuICAgICAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cIml0ZW1UZW1wbGF0ZVJlZiB8fCBkZWZhdWx0SXRlbVRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwieyAkaW1wbGljaXQ6IGl0ZW0sIGluZGV4OiBpfVwiPlxuICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L3RkPlxuICAgICAgPC90cj5cbiAgICA8L3RhYmxlPlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgIDxkaXYgY2xhc3M9XCJjb2wgdGV4dC1yaWdodCBtci0yXCI+XG4gICAgICB7e3RoaXMuc3RhcnRPZkNhbGVuZGFyICB8IGFtRGF0ZUZvcm1hdH19XG4gICAgICA8c3ZnIHN0eWxlPVwid2lkdGg6MjRweDtoZWlnaHQ6MjRweFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgPHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNMTQgMTYuOTRWMTIuOTRINS4wOEw1LjA1IDEwLjkzSDE0VjYuOTRMMTkgMTEuOTRaXCIvPlxuICAgICAgPC9zdmc+XG4gICAgICB7e3RoaXMuZW5kT2ZDYWxlbmRhciAgfCBhbURhdGVGb3JtYXQgfX1cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cblxuPGRpdiBjbGFzcz1cIm5vLWNhci1leGlzdHNcIiAqbmdJZj1cImZpbHRlcmVkUmVzb3VyY2VzLmxlbmd0aCA9PSAwXCI+XG4gIHt7dGhpcy5maWx0ZXJlZFJlc291cmNlcy5sZW5ndGggPT0gMCA/IFwiTm8gcmVzdWx0cyBmb3VuZCB3aXRoIHRoaXMgY2FyIHJlc291cmNlXCIgOiBcIlwifX1cbjwvZGl2PlxuIl19