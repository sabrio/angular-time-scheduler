{"version":3,"file":"ngx-table-scheduler.mjs","sources":["../../../projects/ngx-calendar-scheduler/src/lib/ngx-table-scheduler.service.ts","../../../projects/ngx-calendar-scheduler/src/lib/ngx-table-scheduler.component.ts","../../../projects/ngx-calendar-scheduler/src/lib/ngx-table-scheduler.component.html","../../../projects/ngx-calendar-scheduler/src/lib/ngx-table-scheduler.module.ts","../../../projects/ngx-calendar-scheduler/src/public-api.ts","../../../projects/ngx-calendar-scheduler/src/ngx-table-scheduler.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxTableSchedulerService {\n\n  constructor() { }\n}\n","import {\n  Component,\n  Input,\n  OnInit,\n  Output,\n  EventEmitter,\n  ViewChild,\n  ElementRef,\n  SimpleChanges,\n  ContentChild,\n  TemplateRef\n} from '@angular/core';\nimport moment from 'moment';\nimport {FormControl} from '@angular/forms';\nimport {debounceTime, distinctUntilChanged} from 'rxjs/operators';\n\ninterface Row {\n  resource: any;\n  items: Cell[] | any;\n}\n\ninterface Cell {\n  type: 'item' | 'resource';\n  resource?: any[]\n  header?: any;\n  items?: any[];\n  text?: string;\n}\n\n@Component({\n  selector: 'ngx-table-scheduler',\n  templateUrl: 'ngx-table-scheduler.component.html',\n  styleUrls: ['ngx-table-scheduler.component.scss']\n})\nexport class NgxTableSchedulerComponent implements OnInit {\n  @Input() startOfCalendar: any;\n  @Input() endOfCalendar: any;\n  @Input() currentDate: any;\n  @Input() unassignedItems: any;\n  @Input() defaultValue: any;\n  @Input() currentHours: any;\n  @Input() resources: any[] = [];\n  @Input() resourceFields: any[] = [];\n  @Input() items: any[] = [];\n  @Input() showSearchFilter: boolean = false;\n  @Input() itemWidth: any;\n  @Input() itemHeight: any\n\n  @ViewChild('table', {read: ElementRef}) public table: ElementRef<any> | any;\n\n  @Input() set filter(filter: string) {\n    this.searchCtrl.setValue(filter);\n    if (this.tableRows) {\n      this.filterResources(filter);\n      this.generateTable();\n    }\n  }\n\n  @ContentChild(\"itemTemplate\", {static: false}) itemTemplateRef: TemplateRef<any> | any;\n  @ContentChild(\"itemContentTemplate\", {static: false}) itemContentTemplateRef: TemplateRef<any> | any;\n\n  @Output() itemAssigned: EventEmitter<any> = new EventEmitter();\n  @Output() itemDeleted: EventEmitter<any> = new EventEmitter()\n\n  itemLeft = 0;\n  tableRows: Row[] = [];\n  itemHeaders: any[] = [];\n\n  filteredResources: any = [];\n  searchCtrl = new FormControl();\n\n  selectedItem: any = null;\n  resourceWidth: any;\n  @Input() noAvailableSlots: any;\n\n\n  constructor() {\n  }\n\n  ngOnDestroy() {\n  }\n\n  ngOnInit(): void {\n    this.handleFormSearch();\n    this.filteredResources = this.resources\n    this.generateTable();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    console.log(moment().toISOString());\n\n\n    let shouldGenerate = false;\n    if (changes['startOfCalendar'] && !(this.startOfCalendar instanceof moment)) {\n      this.startOfCalendar = moment(this.startOfCalendar);\n    }\n    if (changes['endOfCalendar'] && !(this.endOfCalendar instanceof moment)) {\n      this.endOfCalendar = moment(this.endOfCalendar);\n    }\n    if (changes['items']) {\n      shouldGenerate = true;\n    }\n    if (changes['resources']) {\n      this.filteredResources = this.resources;\n      shouldGenerate = true;\n    }\n\n    if (shouldGenerate)\n      this.generateTable();\n  }\n\n  prepareAssignItem(item: any) {\n    this.items = this.items.filter(i => !i.temporary);\n    this.noAvailableSlots = false;\n\n    if (this.selectedItem?.id === item.id) {\n      this.selectedItem = null;\n      this.generateTable()\n      return;\n    }\n    this.selectedItem = item;\n    for (const resource of this.resources) {\n      const resourceItems = this.items.filter(x => x.resource_id === resource.id)\n      let qualifies = true;\n\n      for (const resourceItem of resourceItems) {\n        if (moment(resourceItem.start_date).isBefore(item.end_date) && moment(resourceItem.end_date).isAfter(item.start_date))\n          qualifies = false;\n      }\n\n      if (!qualifies)\n        continue;\n      this.items.push({\n        ...item,\n        resource_id: resource.id,\n        temporary: true,\n        color: 'rgb(162 155 178 / 62%)',\n\n      })\n    }\n    const temporaryItem = this.items.filter(x => x.temporary)\n\n    if (temporaryItem.length === 0) {\n      this.noAvailableSlots = true;\n    }\n\n    this.generateTable();\n    if (this.searchCtrl.value) {\n      this.filterResources(this.searchCtrl.value);\n    }\n    // Scroll to event\n    const differenceInPixel = moment(item.start_date).diff(this.startOfCalendar, 'days') * this.itemWidth;\n    setTimeout(() => {\n      this.table.nativeElement.scrollLeft = differenceInPixel;\n    }, 50);\n  }\n\n  itemClick(item: any) {\n    if (!item.temporary)\n      return;\n    this.items = this.items.filter(i => !i.temporary);\n    this.items.find(i => i.id === item?.id).resource_id = item?.resource_id;\n    console.log('i', item)\n\n    this.generateTable();\n    this.itemAssigned.emit(item);\n  }\n\n  public generateTable() {\n    if (this.searchCtrl.value) {\n      this.filterResources(this.searchCtrl.value);\n    }\n\n    this.tableRows = [];\n    for (const resource of this.filteredResources) {\n      const cells: Cell[] = [];\n      for (const field of this.resourceFields) {\n        cells.push(\n          {\n            type: 'resource',\n            resource: resource,\n            text: resource[field],\n          });\n      }\n      this.resourceWidth = 100 * this.resourceFields.length;\n      this.tableRows.push({resource: resource, items: cells});\n    }\n\n    this.itemHeaders = [];\n\n    for (const i = this.startOfCalendar.clone(); i.isBefore(this.endOfCalendar); i.add(1, \"day\")) {\n      this.itemHeaders.push({\n        date: i.clone(),\n        dayOfWeek: i.day(),\n        currentDate: i.date(),\n      });\n    }\n\n    for (const row of this.tableRows) {\n      for (const header of this.itemHeaders) {\n        const cell: Cell = {\n          type: 'item',\n          resource: row.resource,\n          header: header,\n          items: [],\n        };\n        row.items.push(cell);\n        const items = this.items.filter(x => x.resource_id === row?.resource?.id && (header.date.isSame(x.start_date, 'day') || (header.date.isSame(this.startOfCalendar, 'day') && this.startOfCalendar.isAfter(x.start_date))))\n        for (const item of items) {\n          const duration = moment.duration(item.end_date.diff(item.start_date));\n          const hours = duration.asHours();\n\n          let addPixels = 0;\n          if (moment(item.end_date).isAfter(this.endOfCalendar)) {\n            const offsetDuration = moment.duration(this.endOfCalendar.diff(item.end_date));\n            const offsetHours = offsetDuration.asHours();\n            addPixels = offsetHours / 24 * this.itemWidth;\n          }\n\n          let substract = 0;\n          if (this.startOfCalendar.isAfter(item.start_date)) {\n            const inHours = moment.duration(this.startOfCalendar.diff(item.start_date))\n            const diffHours = inHours.asHours();\n            substract = diffHours / 24 * this.itemWidth;\n          }\n\n          // @ts-ignore\n          cell.items.push({\n            ...item,\n            _width: ((hours / 24) * this.itemWidth) + addPixels - substract,\n            _left: substract ? this.itemLeft : this.itemWidth / 24 * moment(item.start_date).get(\"hours\"),\n          })\n        }\n      }\n    }\n    this.unassignedItems = this.items.filter(x => x.resource_id == null).filter(x => x.text === \"HOLD\")\n  }\n\n  private handleFormSearch() {\n    this.searchCtrl.valueChanges\n      .pipe(\n        debounceTime(125),\n        distinctUntilChanged(),\n      )\n      .subscribe(value => {\n        this.filterResources(value)\n        this.generateTable();\n      });\n  }\n\n  // @ts-ignore\n  private filterResources(value: any) {\n    if (value === null) {\n      return true;\n    }\n    this.filteredResources = this.resources.filter(resource => {\n      const {Category, Code, id, Number} = resource\n      const resourceInformation = (Category + Code + id + Number).toLowerCase();\n      return resourceInformation.includes(value?.toLowerCase());\n    });\n  }\n}\n","<div class=\"table-outer\">\n  <div class=\"table-inner\" #table [ngStyle]=\"{'margin-left.px':resourceWidth}\">\n    <table>\n      <tr>\n        <th *ngFor=\"let field of resourceFields\" class=\"resource-header\">{{field}}</th>\n        <th *ngFor=\"let date of itemHeaders\" class=\"item-header\" [style.width.px]=\"itemWidth\"\n            [class.currentDay]=\"date.currentDate == currentDate.getDate()\"\n            [class.weekend]=\"date.dayOfWeek==0 || date.dayOfWeek==6\">\n          {{ date.date   | amDateFormat : ' MMM  d '}}\n        </th>\n      </tr>\n\n      <tr *ngFor=\"let row of tableRows\">\n        <td *ngFor=\"let cell of row.items\"\n            [class.resource-cell]=\"cell.type == 'resource'\"\n            [class.item-cell]=\"cell.type == 'item'\"\n            [class.weekend]=\"cell?.header?.dayOfWeek == 0 || cell?.header?.dayOfWeek == 6\"\n            [class.currentDay]=\"cell?.header?.currentDate == currentDate.getDate()\"\n            [style.width.px]=\"cell.type == 'item' && itemWidth \"\n            [style.height.px]=\"(cell.type ==='item' || cell.type === 'resource') && itemHeight\">\n          <span *ngIf=\"!cell.items || cell.items.length == 0\">{{cell.text}}</span>\n          <span>\n                          <ng-template #defaultItemTemplateContent let-item>\n                <div *ngIf=\"item.temporary\" class=\"check icon\"></div>\n                            {{item?.id == selectedItem?.id && row.resource?.id == selectedItem?.resource_id ? '' : item?.text }}\n              </ng-template>\n              <ng-template #defaultItemTemplate let-item let-i>\n                <div class=\"default-item\"\n                     (click)=\"itemClick(item)\"\n                     [class.selected-item]=\"item?.id == selectedItem?.id  && row.resource.id == selectedItem?.resource_id\"\n                     [ngStyle]=\"{ 'left.px': item._left, 'width.px': item._width, 'background-color': item?.color}\">\n                    <ng-container\n                      [ngTemplateOutlet]=\"itemContentTemplateRef || defaultItemTemplateContent\"\n                      [ngTemplateOutletContext]=\"{ $implicit: item, index: i}\">\n                   </ng-container>\n                </div>\n              </ng-template>\n              <ng-container\n                *ngFor=\"let item of cell.items;let i=index\"\n                [ngTemplateOutlet]=\"itemTemplateRef || defaultItemTemplate\"\n                [ngTemplateOutletContext]=\"{ $implicit: item, index: i}\">\n             </ng-container>\n         </span>\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div class=\"row\">\n    <div class=\"col text-right mr-2\">\n      {{this.startOfCalendar  | amDateFormat}}\n      <svg style=\"width:24px;height:24px\" viewBox=\"0 0 24 24\">\n        <path fill=\"currentColor\" d=\"M14 16.94V12.94H5.08L5.05 10.93H14V6.94L19 11.94Z\"/>\n      </svg>\n      {{this.endOfCalendar  | amDateFormat }}\n    </div>\n  </div>\n</div>\n\n<div class=\"no-car-exists\" *ngIf=\"filteredResources.length == 0\">\n  {{this.filteredResources.length == 0 ? \"No results found with this car resource\" : \"\"}}\n</div>\n","import { NgModule } from '@angular/core';\nimport { NgxTableSchedulerComponent } from './ngx-table-scheduler.component';\nimport {MomentModule} from \"ngx-moment\";\nimport {CommonModule} from \"@angular/common\";\n\n\n\n@NgModule({\n  declarations: [\n    NgxTableSchedulerComponent\n  ],\n  imports: [\n    MomentModule,\n    CommonModule,\n  ],\n  exports: [\n    NgxTableSchedulerComponent\n  ]\n})\nexport class NgxTableSchedulerModule { }\n","/*\n * Public API Surface of ngx-calendar-scheduler\n */\n\nexport * from './lib/ngx-table-scheduler.service';\nexport * from './lib/ngx-table-scheduler.component';\nexport * from './lib/ngx-table-scheduler.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}